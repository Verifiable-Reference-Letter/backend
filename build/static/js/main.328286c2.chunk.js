(this.webpackJsonptutorialtoken=this.webpackJsonptutorialtoken||[]).push([[0],{144:function(e){e.exports=JSON.parse('{"contractName":"TutorialToken","abi":[{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"constant":true,"inputs":[],"name":"INITAL_SUPPLY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"rate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"weiRaised","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"stabilizeRate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"buyExampleToken","outputs":[],"payable":true,"stateMutability":"payable","type":"function"}],"metadata":"{\\"compiler\\":{\\"version\\":\\"0.5.16+commit.9c3226ce\\"},\\"language\\":\\"Solidity\\",\\"output\\":{\\"abi\\":[{\\"inputs\\":[],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"constructor\\"},{\\"anonymous\\":false,\\"inputs\\":[{\\"indexed\\":true,\\"internalType\\":\\"address\\",\\"name\\":\\"owner\\",\\"type\\":\\"address\\"},{\\"indexed\\":true,\\"internalType\\":\\"address\\",\\"name\\":\\"spender\\",\\"type\\":\\"address\\"},{\\"indexed\\":false,\\"internalType\\":\\"uint256\\",\\"name\\":\\"value\\",\\"type\\":\\"uint256\\"}],\\"name\\":\\"Approval\\",\\"type\\":\\"event\\"},{\\"anonymous\\":false,\\"inputs\\":[{\\"indexed\\":true,\\"internalType\\":\\"address\\",\\"name\\":\\"from\\",\\"type\\":\\"address\\"},{\\"indexed\\":true,\\"internalType\\":\\"address\\",\\"name\\":\\"to\\",\\"type\\":\\"address\\"},{\\"indexed\\":false,\\"internalType\\":\\"uint256\\",\\"name\\":\\"value\\",\\"type\\":\\"uint256\\"}],\\"name\\":\\"Transfer\\",\\"type\\":\\"event\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"INITAL_SUPPLY\\",\\"outputs\\":[{\\"internalType\\":\\"uint256\\",\\"name\\":\\"\\",\\"type\\":\\"uint256\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[{\\"internalType\\":\\"address\\",\\"name\\":\\"owner\\",\\"type\\":\\"address\\"},{\\"internalType\\":\\"address\\",\\"name\\":\\"spender\\",\\"type\\":\\"address\\"}],\\"name\\":\\"allowance\\",\\"outputs\\":[{\\"internalType\\":\\"uint256\\",\\"name\\":\\"\\",\\"type\\":\\"uint256\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[{\\"internalType\\":\\"address\\",\\"name\\":\\"spender\\",\\"type\\":\\"address\\"},{\\"internalType\\":\\"uint256\\",\\"name\\":\\"amount\\",\\"type\\":\\"uint256\\"}],\\"name\\":\\"approve\\",\\"outputs\\":[{\\"internalType\\":\\"bool\\",\\"name\\":\\"\\",\\"type\\":\\"bool\\"}],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[{\\"internalType\\":\\"address\\",\\"name\\":\\"account\\",\\"type\\":\\"address\\"}],\\"name\\":\\"balanceOf\\",\\"outputs\\":[{\\"internalType\\":\\"uint256\\",\\"name\\":\\"\\",\\"type\\":\\"uint256\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[],\\"name\\":\\"buyExampleToken\\",\\"outputs\\":[],\\"payable\\":true,\\"stateMutability\\":\\"payable\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"decimals\\",\\"outputs\\":[{\\"internalType\\":\\"uint8\\",\\"name\\":\\"\\",\\"type\\":\\"uint8\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[{\\"internalType\\":\\"address\\",\\"name\\":\\"spender\\",\\"type\\":\\"address\\"},{\\"internalType\\":\\"uint256\\",\\"name\\":\\"subtractedValue\\",\\"type\\":\\"uint256\\"}],\\"name\\":\\"decreaseAllowance\\",\\"outputs\\":[{\\"internalType\\":\\"bool\\",\\"name\\":\\"\\",\\"type\\":\\"bool\\"}],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[{\\"internalType\\":\\"address\\",\\"name\\":\\"spender\\",\\"type\\":\\"address\\"},{\\"internalType\\":\\"uint256\\",\\"name\\":\\"addedValue\\",\\"type\\":\\"uint256\\"}],\\"name\\":\\"increaseAllowance\\",\\"outputs\\":[{\\"internalType\\":\\"bool\\",\\"name\\":\\"\\",\\"type\\":\\"bool\\"}],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"name\\",\\"outputs\\":[{\\"internalType\\":\\"string\\",\\"name\\":\\"\\",\\"type\\":\\"string\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"owner\\",\\"outputs\\":[{\\"internalType\\":\\"address\\",\\"name\\":\\"\\",\\"type\\":\\"address\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"rate\\",\\"outputs\\":[{\\"internalType\\":\\"uint256\\",\\"name\\":\\"\\",\\"type\\":\\"uint256\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[],\\"name\\":\\"stabilizeRate\\",\\"outputs\\":[],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"symbol\\",\\"outputs\\":[{\\"internalType\\":\\"string\\",\\"name\\":\\"\\",\\"type\\":\\"string\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"totalSupply\\",\\"outputs\\":[{\\"internalType\\":\\"uint256\\",\\"name\\":\\"\\",\\"type\\":\\"uint256\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[{\\"internalType\\":\\"address\\",\\"name\\":\\"recipient\\",\\"type\\":\\"address\\"},{\\"internalType\\":\\"uint256\\",\\"name\\":\\"amount\\",\\"type\\":\\"uint256\\"}],\\"name\\":\\"transfer\\",\\"outputs\\":[{\\"internalType\\":\\"bool\\",\\"name\\":\\"\\",\\"type\\":\\"bool\\"}],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[{\\"internalType\\":\\"address\\",\\"name\\":\\"sender\\",\\"type\\":\\"address\\"},{\\"internalType\\":\\"address\\",\\"name\\":\\"recipient\\",\\"type\\":\\"address\\"},{\\"internalType\\":\\"uint256\\",\\"name\\":\\"amount\\",\\"type\\":\\"uint256\\"}],\\"name\\":\\"transferFrom\\",\\"outputs\\":[{\\"internalType\\":\\"bool\\",\\"name\\":\\"\\",\\"type\\":\\"bool\\"}],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"weiRaised\\",\\"outputs\\":[{\\"internalType\\":\\"uint256\\",\\"name\\":\\"\\",\\"type\\":\\"uint256\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"}],\\"devdoc\\":{\\"methods\\":{\\"allowance(address,address)\\":{\\"details\\":\\"See {IERC20-allowance}.\\"},\\"approve(address,uint256)\\":{\\"details\\":\\"See {IERC20-approve}.     * Requirements:     * - `spender` cannot be the zero address.\\"},\\"balanceOf(address)\\":{\\"details\\":\\"See {IERC20-balanceOf}.\\"},\\"decreaseAllowance(address,uint256)\\":{\\"details\\":\\"Atomically decreases the allowance granted to `spender` by the caller.     * This is an alternative to {approve} that can be used as a mitigation for problems described in {IERC20-approve}.     * Emits an {Approval} event indicating the updated allowance.     * Requirements:     * - `spender` cannot be the zero address. - `spender` must have allowance for the caller of at least `subtractedValue`.\\"},\\"increaseAllowance(address,uint256)\\":{\\"details\\":\\"Atomically increases the allowance granted to `spender` by the caller.     * This is an alternative to {approve} that can be used as a mitigation for problems described in {IERC20-approve}.     * Emits an {Approval} event indicating the updated allowance.     * Requirements:     * - `spender` cannot be the zero address.\\"},\\"totalSupply()\\":{\\"details\\":\\"See {IERC20-totalSupply}.\\"},\\"transfer(address,uint256)\\":{\\"details\\":\\"See {IERC20-transfer}.     * Requirements:     * - `recipient` cannot be the zero address. - the caller must have a balance of at least `amount`.\\"},\\"transferFrom(address,address,uint256)\\":{\\"details\\":\\"See {IERC20-transferFrom}.     * Emits an {Approval} event indicating the updated allowance. This is not required by the EIP. See the note at the beginning of {ERC20};     * Requirements: - `sender` and `recipient` cannot be the zero address. - `sender` must have a balance of at least `amount`. - the caller must have allowance for `sender`\'s tokens of at least `amount`.\\"}}},\\"userdoc\\":{\\"methods\\":{}}},\\"settings\\":{\\"compilationTarget\\":{\\"/C/Users/jimjb/capstone/Lehigh-ETC-Capstone/frontend/contracts/ERC20.sol\\":\\"TutorialToken\\"},\\"evmVersion\\":\\"istanbul\\",\\"libraries\\":{},\\"optimizer\\":{\\"enabled\\":false,\\"runs\\":200},\\"remappings\\":[]},\\"sources\\":{\\"/C/Users/jimjb/capstone/Lehigh-ETC-Capstone/frontend/contracts/ERC20.sol\\":{\\"keccak256\\":\\"0x50cbe60a9896b4b61619a88f9c28375f89285432ae8fc67706ca51f96b1f0290\\",\\"urls\\":[\\"bzz-raw://ca647a3347847ef7d4ebb12485b009854c3c33fb25dbc59e750c7ab257b4ffe0\\",\\"dweb:/ipfs/QmPMtu6Jb2CrXwS5TTeXRNiXQfYa9rcq8eVmTPns9H4hhY\\"]},\\"@openzeppelin/contracts/GSN/Context.sol\\":{\\"keccak256\\":\\"0x90a3995645af7562d84b9d69363ffa5ae7217714ab61e951bf7bc450f40e4061\\",\\"urls\\":[\\"bzz-raw://216ef9d6b614db4eb46970b4e84903f2534a45572dd30a79f0041f1a5830f436\\",\\"dweb:/ipfs/QmNPrJ4MWKUAWzKXpUqeyKRUfosaoANZAqXgvepdrCwZAG\\"]},\\"@openzeppelin/contracts/math/SafeMath.sol\\":{\\"keccak256\\":\\"0x640b6dee7a4b830bdfd52b5031a07fc2b12209f5b2e29e5d364a7d37f69d8076\\",\\"urls\\":[\\"bzz-raw://31113152e1ddb78fe7a4197f247591ca894e93f916867beb708d8e747b6cc74f\\",\\"dweb:/ipfs/QmbZaJyXdpsYGykVhHH9qpVGQg9DGCxE2QufbCUy3daTgq\\"]},\\"@openzeppelin/contracts/token/ERC20/ERC20.sol\\":{\\"keccak256\\":\\"0xb15af804e2bc97db51e4e103f13de9fe13f87e6b835d7a88c897966c0e58506e\\",\\"urls\\":[\\"bzz-raw://1e8cff8437557fc915a3bed968fcd8f2df9809599e665ef69c2c9ce628548055\\",\\"dweb:/ipfs/QmP5spYP8vs2jvLF8zNrXUbqB79hMsoEvMHiLcBxerWKcm\\"]},\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\":{\\"keccak256\\":\\"0xe5bb0f57cff3e299f360052ba50f1ea0fff046df2be070b6943e0e3c3fdad8a9\\",\\"urls\\":[\\"bzz-raw://59fd025151435da35faa8093a5c7a17de02de9d08ad27275c5cdf05050820d91\\",\\"dweb:/ipfs/QmQMvwEcPhoRXzbXyrdoeRtvLoifUW9Qh7Luho7bmUPRkc\\"]}},\\"version\\":1}","bytecode":"0x60806040526040518060400160405280600d81526020017f5475746f7269616c546f6b656e0000000000000000000000000000000000000081525060039080519060200190620000519291906200011e565b506040518060400160405280600281526020017f5454000000000000000000000000000000000000000000000000000000000000815250600490805190602001906200009f9291906200011e565b506002600560006101000a81548160ff021916908360ff1602179055506064600655348015620000ce57600080fd5b50600a60088190555033600760006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550620001cd565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200016157805160ff191683800117855562000192565b8280016001018555821562000192579182015b828111156200019157825182559160200191906001019062000174565b5b509050620001a19190620001a5565b5090565b620001ca91905b80821115620001c6576000816000905550600101620001ac565b5090565b90565b6112ab80620001dd6000396000f3fe6080604052600436106100fe5760003560e01c80634042b66f11610095578063a457c2d711610064578063a457c2d714610514578063a9059cbb14610587578063dd62ed3e146105fa578063e00ecac71461067f578063f486f1a914610696576100fe565b80634042b66f1461039d57806370a08231146103c85780638da5cb5b1461042d57806395d89b4114610484576100fe565b806323b872dd116100d157806323b872dd1461023b5780632c4e722e146102ce578063313ce567146102f9578063395093511461032a576100fe565b806306fdde0314610103578063095ea7b31461019357806318160ddd1461020657806321d1030414610231575b600080fd5b34801561010f57600080fd5b506101186106c1565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561015857808201518184015260208101905061013d565b50505050905090810190601f1680156101855780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561019f57600080fd5b506101ec600480360360408110156101b657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919050505061075f565b604051808215151515815260200191505060405180910390f35b34801561021257600080fd5b5061021b61077d565b6040518082815260200191505060405180910390f35b610239610787565b005b34801561024757600080fd5b506102b46004803603606081101561025e57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506107e7565b604051808215151515815260200191505060405180910390f35b3480156102da57600080fd5b506102e36108c0565b6040518082815260200191505060405180910390f35b34801561030557600080fd5b5061030e6108c6565b604051808260ff1660ff16815260200191505060405180910390f35b34801561033657600080fd5b506103836004803603604081101561034d57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506108d9565b604051808215151515815260200191505060405180910390f35b3480156103a957600080fd5b506103b261098c565b6040518082815260200191505060405180910390f35b3480156103d457600080fd5b50610417600480360360208110156103eb57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610992565b6040518082815260200191505060405180910390f35b34801561043957600080fd5b506104426109da565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561049057600080fd5b50610499610a00565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156104d95780820151818401526020810190506104be565b50505050905090810190601f1680156105065780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561052057600080fd5b5061056d6004803603604081101561053757600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610a9e565b604051808215151515815260200191505060405180910390f35b34801561059357600080fd5b506105e0600480360360408110156105aa57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610b6b565b604051808215151515815260200191505060405180910390f35b34801561060657600080fd5b506106696004803603604081101561061d57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610b89565b6040518082815260200191505060405180910390f35b34801561068b57600080fd5b50610694610c10565b005b3480156106a257600080fd5b506106ab610c24565b6040518082815260200191505060405180910390f35b60038054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156107575780601f1061072c57610100808354040283529160200191610757565b820191906000526020600020905b81548152906001019060200180831161073a57829003601f168201915b505050505081565b600061077361076c610c2a565b8484610c32565b6001905092915050565b6000600254905090565b600034141561079557600080fd5b60006107ac60085434610e2990919063ffffffff16565b905060006107c33447610eaf90919063ffffffff16565b90504781116107d157600080fd5b6107db3383610f37565b6107e3610c10565b5050565b60006107f48484846110f2565b6108b584610800610c2a565b6108b08560405180606001604052806028815260200161120660289139600160008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000610866610c2a565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546111029092919063ffffffff16565b610c32565b600190509392505050565b60085481565b600560009054906101000a900460ff1681565b60006109826108e6610c2a565b8461097d85600160006108f7610c2a565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610eaf90919063ffffffff16565b610c32565b6001905092915050565b60095481565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60048054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610a965780601f10610a6b57610100808354040283529160200191610a96565b820191906000526020600020905b815481529060010190602001808311610a7957829003601f168201915b505050505081565b6000610b61610aab610c2a565b84610b5c856040518060600160405280602581526020016112526025913960016000610ad5610c2a565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546111029092919063ffffffff16565b610c32565b6001905092915050565b6000610b7f610b78610c2a565b84846110f2565b6001905092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610c1861077d565b60085402600881905550565b60065481565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415610cb8576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602481526020018061122e6024913960400191505060405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610d3e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001806111c36022913960400191505060405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925836040518082815260200191505060405180910390a3505050565b600080831415610e3c5760009050610ea9565b6000828402905082848281610e4d57fe5b0414610ea4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260218152602001806111e56021913960400191505060405180910390fd5b809150505b92915050565b600080828401905083811015610f2d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601b8152602001807f536166654d6174683a206164646974696f6e206f766572666c6f77000000000081525060200191505060405180910390fd5b8091505092915050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610fda576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f45524332303a206d696e7420746f20746865207a65726f20616464726573730081525060200191505060405180910390fd5b610fef81600254610eaf90919063ffffffff16565b600281905550611046816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610eaf90919063ffffffff16565b6000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a35050565b6110fd8383836110f2565b505050565b60008383111582906111af576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825283818151815260200191508051906020019080838360005b83811015611174578082015181840152602081019050611159565b50505050905090810190601f1680156111a15780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b506000838503905080915050939250505056fe45524332303a20617070726f766520746f20746865207a65726f2061646472657373536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f7745524332303a207472616e7366657220616d6f756e74206578636565647320616c6c6f77616e636545524332303a20617070726f76652066726f6d20746865207a65726f206164647265737345524332303a2064656372656173656420616c6c6f77616e63652062656c6f77207a65726fa265627a7a72315820d3ef196a402eb154ec5bbc5a56a154c615e192ef56adbd136c1c07fb29ecf64564736f6c63430005100032","deployedBytecode":"0x6080604052600436106100fe5760003560e01c80634042b66f11610095578063a457c2d711610064578063a457c2d714610514578063a9059cbb14610587578063dd62ed3e146105fa578063e00ecac71461067f578063f486f1a914610696576100fe565b80634042b66f1461039d57806370a08231146103c85780638da5cb5b1461042d57806395d89b4114610484576100fe565b806323b872dd116100d157806323b872dd1461023b5780632c4e722e146102ce578063313ce567146102f9578063395093511461032a576100fe565b806306fdde0314610103578063095ea7b31461019357806318160ddd1461020657806321d1030414610231575b600080fd5b34801561010f57600080fd5b506101186106c1565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561015857808201518184015260208101905061013d565b50505050905090810190601f1680156101855780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561019f57600080fd5b506101ec600480360360408110156101b657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919050505061075f565b604051808215151515815260200191505060405180910390f35b34801561021257600080fd5b5061021b61077d565b6040518082815260200191505060405180910390f35b610239610787565b005b34801561024757600080fd5b506102b46004803603606081101561025e57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506107e7565b604051808215151515815260200191505060405180910390f35b3480156102da57600080fd5b506102e36108c0565b6040518082815260200191505060405180910390f35b34801561030557600080fd5b5061030e6108c6565b604051808260ff1660ff16815260200191505060405180910390f35b34801561033657600080fd5b506103836004803603604081101561034d57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506108d9565b604051808215151515815260200191505060405180910390f35b3480156103a957600080fd5b506103b261098c565b6040518082815260200191505060405180910390f35b3480156103d457600080fd5b50610417600480360360208110156103eb57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610992565b6040518082815260200191505060405180910390f35b34801561043957600080fd5b506104426109da565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561049057600080fd5b50610499610a00565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156104d95780820151818401526020810190506104be565b50505050905090810190601f1680156105065780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561052057600080fd5b5061056d6004803603604081101561053757600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610a9e565b604051808215151515815260200191505060405180910390f35b34801561059357600080fd5b506105e0600480360360408110156105aa57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610b6b565b604051808215151515815260200191505060405180910390f35b34801561060657600080fd5b506106696004803603604081101561061d57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610b89565b6040518082815260200191505060405180910390f35b34801561068b57600080fd5b50610694610c10565b005b3480156106a257600080fd5b506106ab610c24565b6040518082815260200191505060405180910390f35b60038054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156107575780601f1061072c57610100808354040283529160200191610757565b820191906000526020600020905b81548152906001019060200180831161073a57829003601f168201915b505050505081565b600061077361076c610c2a565b8484610c32565b6001905092915050565b6000600254905090565b600034141561079557600080fd5b60006107ac60085434610e2990919063ffffffff16565b905060006107c33447610eaf90919063ffffffff16565b90504781116107d157600080fd5b6107db3383610f37565b6107e3610c10565b5050565b60006107f48484846110f2565b6108b584610800610c2a565b6108b08560405180606001604052806028815260200161120660289139600160008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000610866610c2a565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546111029092919063ffffffff16565b610c32565b600190509392505050565b60085481565b600560009054906101000a900460ff1681565b60006109826108e6610c2a565b8461097d85600160006108f7610c2a565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610eaf90919063ffffffff16565b610c32565b6001905092915050565b60095481565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60048054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610a965780601f10610a6b57610100808354040283529160200191610a96565b820191906000526020600020905b815481529060010190602001808311610a7957829003601f168201915b505050505081565b6000610b61610aab610c2a565b84610b5c856040518060600160405280602581526020016112526025913960016000610ad5610c2a565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546111029092919063ffffffff16565b610c32565b6001905092915050565b6000610b7f610b78610c2a565b84846110f2565b6001905092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610c1861077d565b60085402600881905550565b60065481565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415610cb8576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602481526020018061122e6024913960400191505060405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610d3e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001806111c36022913960400191505060405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925836040518082815260200191505060405180910390a3505050565b600080831415610e3c5760009050610ea9565b6000828402905082848281610e4d57fe5b0414610ea4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260218152602001806111e56021913960400191505060405180910390fd5b809150505b92915050565b600080828401905083811015610f2d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601b8152602001807f536166654d6174683a206164646974696f6e206f766572666c6f77000000000081525060200191505060405180910390fd5b8091505092915050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610fda576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f45524332303a206d696e7420746f20746865207a65726f20616464726573730081525060200191505060405180910390fd5b610fef81600254610eaf90919063ffffffff16565b600281905550611046816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610eaf90919063ffffffff16565b6000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a35050565b6110fd8383836110f2565b505050565b60008383111582906111af576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825283818151815260200191508051906020019080838360005b83811015611174578082015181840152602081019050611159565b50505050905090810190601f1680156111a15780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b506000838503905080915050939250505056fe45524332303a20617070726f766520746f20746865207a65726f2061646472657373536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f7745524332303a207472616e7366657220616d6f756e74206578636565647320616c6c6f77616e636545524332303a20617070726f76652066726f6d20746865207a65726f206164647265737345524332303a2064656372656173656420616c6c6f77616e63652062656c6f77207a65726fa265627a7a72315820d3ef196a402eb154ec5bbc5a56a154c615e192ef56adbd136c1c07fb29ecf64564736f6c63430005100032","sourceMap":"139:1038:1:-;;;205:36;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;245:27;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;300:1;276:25;;;;;;;;;;;;;;;;;;;;336:3;305:34;;449:63;8:9:-1;5:2;;;30:1;27;20:12;5:2;449:63:1;482:2;475:4;:9;;;;497:10;489:5;;:18;;;;;;;;;;;;;;;;;;139:1038;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;","deployedSourceMap":"139:1038:1:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;205:36;;8:9:-1;5:2;;;30:1;27;20:12;5:2;205:36:1;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;23:1:-1;8:100;33:3;30:1;27:10;8:100;;;99:1;94:3;90:11;84:18;80:1;75:3;71:11;64:39;52:2;49:1;45:10;40:15;;8:100;;;12:14;205:36:1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2500:149:5;;8:9:-1;5:2;;;30:1;27;20:12;5:2;2500:149:5;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;2500:149:5;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;1559:89;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1559:89:5;;;:::i;:::-;;;;;;;;;;;;;;;;;;;701:473:1;;;:::i;:::-;;3107:300:5;;8:9:-1;5:2;;;30:1;27;20:12;5:2;3107:300:5;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;3107:300:5;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;396:19:1;;8:9:-1;5:2;;;30:1;27;20:12;5:2;396:19:1;;;:::i;:::-;;;;;;;;;;;;;;;;;;;276:25;;8:9:-1;5:2;;;30:1;27;20:12;5:2;276:25:1;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;3802:207:5;;8:9:-1;5:2;;;30:1;27;20:12;5:2;3802:207:5;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;3802:207:5;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;419:24:1;;8:9:-1;5:2;;;30:1;27;20:12;5:2;419:24:1;;;:::i;:::-;;;;;;;;;;;;;;;;;;;1706:108:5;;8:9:-1;5:2;;;30:1;27;20:12;5:2;1706:108:5;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;1706:108:5;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;370:20:1;;8:9:-1;5:2;;;30:1;27;20:12;5:2;370:20:1;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;245:27;;8:9:-1;5:2;;;30:1;27;20:12;5:2;245:27:1;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;23:1:-1;8:100;33:3;30:1;27:10;8:100;;;99:1;94:3;90:11;84:18;80:1;75:3;71:11;64:39;52:2;49:1;45:10;40:15;;8:100;;;12:14;245:27:1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4496:258:5;;8:9:-1;5:2;;;30:1;27;20:12;5:2;4496:258:5;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;4496:258:5;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;2017:155;;8:9:-1;5:2;;;30:1;27;20:12;5:2;2017:155:5;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;2017:155:5;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;2230:132;;8:9:-1;5:2;;;30:1;27;20:12;5:2;2230:132:5;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;2230:132:5;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;517:69:1;;8:9:-1;5:2;;;30:1;27;20:12;5:2;517:69:1;;;:::i;:::-;;305:34;;8:9:-1;5:2;;;30:1;27;20:12;5:2;305:34:1;;;:::i;:::-;;;;;;;;;;;;;;;;;;;205:36;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;2500:149:5:-;2566:4;2582:39;2591:12;:10;:12::i;:::-;2605:7;2614:6;2582:8;:39::i;:::-;2638:4;2631:11;;2500:149;;;;:::o;1559:89::-;1603:7;1629:12;;1622:19;;1559:89;:::o;701:473:1:-;769:1;756:9;:14;;748:23;;;;;;778:17;798:19;812:4;;798:9;:13;;:19;;;;:::i;:::-;778:39;;822:19;844:36;870:9;844:21;:25;;:36;;;;:::i;:::-;822:58;;930:21;916:11;:35;908:44;;;;;;960:28;966:10;978:9;960:5;:28::i;:::-;1154:15;:13;:15::i;:::-;701:473;;:::o;3107:300:5:-;3196:4;3212:36;3222:6;3230:9;3241:6;3212:9;:36::i;:::-;3258:121;3267:6;3275:12;:10;:12::i;:::-;3289:89;3327:6;3289:89;;;;;;;;;;;;;;;;;:11;:19;3301:6;3289:19;;;;;;;;;;;;;;;:33;3309:12;:10;:12::i;:::-;3289:33;;;;;;;;;;;;;;;;:37;;:89;;;;;:::i;:::-;3258:8;:121::i;:::-;3396:4;3389:11;;3107:300;;;;;:::o;396:19:1:-;;;;:::o;276:25::-;;;;;;;;;;;;;:::o;3802:207:5:-;3882:4;3898:83;3907:12;:10;:12::i;:::-;3921:7;3930:50;3969:10;3930:11;:25;3942:12;:10;:12::i;:::-;3930:25;;;;;;;;;;;;;;;:34;3956:7;3930:34;;;;;;;;;;;;;;;;:38;;:50;;;;:::i;:::-;3898:8;:83::i;:::-;3998:4;3991:11;;3802:207;;;;:::o;419:24:1:-;;;;:::o;1706:108:5:-;1763:7;1789:9;:18;1799:7;1789:18;;;;;;;;;;;;;;;;1782:25;;1706:108;;;:::o;370:20:1:-;;;;;;;;;;;;;:::o;245:27::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;4496:258:5:-;4581:4;4597:129;4606:12;:10;:12::i;:::-;4620:7;4629:96;4668:15;4629:96;;;;;;;;;;;;;;;;;:11;:25;4641:12;:10;:12::i;:::-;4629:25;;;;;;;;;;;;;;;:34;4655:7;4629:34;;;;;;;;;;;;;;;;:38;;:96;;;;;:::i;:::-;4597:8;:129::i;:::-;4743:4;4736:11;;4496:258;;;;:::o;2017:155::-;2086:4;2102:42;2112:12;:10;:12::i;:::-;2126:9;2137:6;2102:9;:42::i;:::-;2161:4;2154:11;;2017:155;;;;:::o;2230:132::-;2302:7;2328:11;:18;2340:5;2328:18;;;;;;;;;;;;;;;:27;2347:7;2328:27;;;;;;;;;;;;;;;;2321:34;;2230:132;;;;:::o;517:69:1:-;568:13;:11;:13::i;:::-;561:4;;:20;554:4;:27;;;;517:69::o;305:34::-;;;;:::o;788:96:3:-;833:15;867:10;860:17;;788:96;:::o;7350:332:5:-;7460:1;7443:19;;:5;:19;;;;7435:68;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;7540:1;7521:21;;:7;:21;;;;7513:68;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;7622:6;7592:11;:18;7604:5;7592:18;;;;;;;;;;;;;;;:27;7611:7;7592:27;;;;;;;;;;;;;;;:36;;;;7659:7;7643:32;;7652:5;7643:32;;;7668:6;7643:32;;;;;;;;;;;;;;;;;;7350:332;;;:::o;2159:459:4:-;2217:7;2463:1;2458;:6;2454:45;;;2487:1;2480:8;;;;2454:45;2509:9;2525:1;2521;:5;2509:17;;2553:1;2548;2544;:5;;;;;;:10;2536:56;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2610:1;2603:8;;;2159:459;;;;;:::o;834:176::-;892:7;911:9;927:1;923;:5;911:17;;951:1;946;:6;;938:46;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1002:1;995:8;;;834:176;;;;:::o;5962:302:5:-;6056:1;6037:21;;:7;:21;;;;6029:65;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6120:24;6137:6;6120:12;;:16;;:24;;;;:::i;:::-;6105:12;:39;;;;6175:30;6198:6;6175:9;:18;6185:7;6175:18;;;;;;;;;;;;;;;;:22;;:30;;;;:::i;:::-;6154:9;:18;6164:7;6154:18;;;;;;;;;;;;;;;:51;;;;6241:7;6220:37;;6237:1;6220:37;;;6250:6;6220:37;;;;;;;;;;;;;;;;;;5962:302;;:::o;591:105:1:-;665:26;675:4;681:2;685:5;665:9;:26::i;:::-;591:105;;;:::o;1732:187:4:-;1818:7;1850:1;1845;:6;;1853:12;1837:29;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;23:1:-1;8:100;33:3;30:1;27:10;8:100;;;99:1;94:3;90:11;84:18;80:1;75:3;71:11;64:39;52:2;49:1;45:10;40:15;;8:100;;;12:14;1837:29:4;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1876:9;1892:1;1888;:5;1876:17;;1911:1;1904:8;;;1732:187;;;;;:::o","source":"pragma solidity ^0.5.0;\\r\\n\\r\\nimport \\"@openzeppelin/contracts/token/ERC20/ERC20.sol\\";\\r\\nimport \\"@openzeppelin/contracts/math/SafeMath.sol\\";\\r\\n\\r\\ncontract TutorialToken is ERC20 {\\r\\n\\tusing SafeMath for uint256;\\r\\n\\tstring public name = \\"TutorialToken\\";\\r\\n\\tstring public symbol = \\"TT\\";\\r\\n\\tuint8 public decimals = 2;\\r\\n\\tuint256 public INITAL_SUPPLY = 100;\\r\\n\\r\\n\\t// ERC20 public token;\\r\\n\\taddress public owner;\\r\\n\\r\\n\\tuint256 public rate;\\r\\n\\tuint256 public weiRaised;\\r\\n\\r\\n\\tconstructor() public {\\r\\n\\t\\trate = 10;\\r\\n\\t\\towner = msg.sender;\\r\\n\\t}\\r\\n\\r\\n\\tfunction stabilizeRate() public {\\r\\n\\t\\trate = rate * totalSupply();\\r\\n\\t}\\r\\n\\r\\n\\tfunction _transfer(address from, address to, uint256 value) internal {\\r\\n\\t\\t_transfer(from, to, value);\\r\\n\\t}\\r\\n\\r\\n\\tfunction buyExampleToken() public payable {\\r\\n\\t\\trequire(msg.value != 0);\\r\\n\\r\\n\\t\\tuint256 numTokens = msg.value.mul(rate);\\r\\n\\t\\tuint256 nextBalance = address(this).balance.add(msg.value);\\r\\n\\r\\n\\t\\t// Security check\\r\\n\\t\\trequire(nextBalance > address(this).balance); \\r\\n\\r\\n\\t\\t_mint(msg.sender, numTokens); // mints new coin to sender\\r\\n\\r\\n\\t\\t// Removed the call to transfer function \\r\\n\\r\\n\\t\\t/*\\r\\n\\t\\t\\tMight implement a withdraw function where we call owner.transfer\\r\\n\\t\\t*/ \\r\\n\\r\\n\\t\\tstabilizeRate();\\r\\n\\t}\\r\\n}","sourcePath":"C:\\\\Users\\\\jimjb\\\\capstone\\\\Lehigh-ETC-Capstone\\\\frontend\\\\contracts\\\\ERC20.sol","ast":{"absolutePath":"/C/Users/jimjb/capstone/Lehigh-ETC-Capstone/frontend/contracts/ERC20.sol","exportedSymbols":{"TutorialToken":[150]},"id":151,"nodeType":"SourceUnit","nodes":[{"id":36,"literals":["solidity","^","0.5",".0"],"nodeType":"PragmaDirective","src":"0:23:1"},{"absolutePath":"@openzeppelin/contracts/token/ERC20/ERC20.sol","file":"@openzeppelin/contracts/token/ERC20/ERC20.sol","id":37,"nodeType":"ImportDirective","scope":151,"sourceUnit":807,"src":"27:55:1","symbolAliases":[],"unitAlias":""},{"absolutePath":"@openzeppelin/contracts/math/SafeMath.sol","file":"@openzeppelin/contracts/math/SafeMath.sol","id":38,"nodeType":"ImportDirective","scope":151,"sourceUnit":402,"src":"84:51:1","symbolAliases":[],"unitAlias":""},{"baseContracts":[{"arguments":null,"baseName":{"contractScope":null,"id":39,"name":"ERC20","nodeType":"UserDefinedTypeName","referencedDeclaration":806,"src":"165:5:1","typeDescriptions":{"typeIdentifier":"t_contract$_ERC20_$806","typeString":"contract ERC20"}},"id":40,"nodeType":"InheritanceSpecifier","src":"165:5:1"}],"contractDependencies":[214,806,875],"contractKind":"contract","documentation":null,"fullyImplemented":true,"id":150,"linearizedBaseContracts":[150,806,875,214],"name":"TutorialToken","nodeType":"ContractDefinition","nodes":[{"id":43,"libraryName":{"contractScope":null,"id":41,"name":"SafeMath","nodeType":"UserDefinedTypeName","referencedDeclaration":401,"src":"181:8:1","typeDescriptions":{"typeIdentifier":"t_contract$_SafeMath_$401","typeString":"library SafeMath"}},"nodeType":"UsingForDirective","src":"175:27:1","typeName":{"id":42,"name":"uint256","nodeType":"ElementaryTypeName","src":"194:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"constant":false,"id":46,"name":"name","nodeType":"VariableDeclaration","scope":150,"src":"205:36:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_string_storage","typeString":"string"},"typeName":{"id":44,"name":"string","nodeType":"ElementaryTypeName","src":"205:6:1","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"value":{"argumentTypes":null,"hexValue":"5475746f7269616c546f6b656e","id":45,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"226:15:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_1e27d619d62987a17e3872af4db4b646569fa29e361d85623518cddc62d1e3b9","typeString":"literal_string \\"TutorialToken\\""},"value":"TutorialToken"},"visibility":"public"},{"constant":false,"id":49,"name":"symbol","nodeType":"VariableDeclaration","scope":150,"src":"245:27:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_string_storage","typeString":"string"},"typeName":{"id":47,"name":"string","nodeType":"ElementaryTypeName","src":"245:6:1","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"value":{"argumentTypes":null,"hexValue":"5454","id":48,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"268:4:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_2ac50a34f0da9360cfd7e529a34ccdaa61aa98e2a0ac0928bf981af8e73352ba","typeString":"literal_string \\"TT\\""},"value":"TT"},"visibility":"public"},{"constant":false,"id":52,"name":"decimals","nodeType":"VariableDeclaration","scope":150,"src":"276:25:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"},"typeName":{"id":50,"name":"uint8","nodeType":"ElementaryTypeName","src":"276:5:1","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"value":{"argumentTypes":null,"hexValue":"32","id":51,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"300:1:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"visibility":"public"},{"constant":false,"id":55,"name":"INITAL_SUPPLY","nodeType":"VariableDeclaration","scope":150,"src":"305:34:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":53,"name":"uint256","nodeType":"ElementaryTypeName","src":"305:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"argumentTypes":null,"hexValue":"313030","id":54,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"336:3:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_100_by_1","typeString":"int_const 100"},"value":"100"},"visibility":"public"},{"constant":false,"id":57,"name":"owner","nodeType":"VariableDeclaration","scope":150,"src":"370:20:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":56,"name":"address","nodeType":"ElementaryTypeName","src":"370:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"public"},{"constant":false,"id":59,"name":"rate","nodeType":"VariableDeclaration","scope":150,"src":"396:19:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":58,"name":"uint256","nodeType":"ElementaryTypeName","src":"396:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"public"},{"constant":false,"id":61,"name":"weiRaised","nodeType":"VariableDeclaration","scope":150,"src":"419:24:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":60,"name":"uint256","nodeType":"ElementaryTypeName","src":"419:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"public"},{"body":{"id":73,"nodeType":"Block","src":"470:42:1","statements":[{"expression":{"argumentTypes":null,"id":66,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":64,"name":"rate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59,"src":"475:4:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"hexValue":"3130","id":65,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"482:2:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"src":"475:9:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":67,"nodeType":"ExpressionStatement","src":"475:9:1"},{"expression":{"argumentTypes":null,"id":71,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":68,"name":"owner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":57,"src":"489:5:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"expression":{"argumentTypes":null,"id":69,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":890,"src":"497:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":70,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sender","nodeType":"MemberAccess","referencedDeclaration":null,"src":"497:10:1","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"489:18:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":72,"nodeType":"ExpressionStatement","src":"489:18:1"}]},"documentation":null,"id":74,"implemented":true,"kind":"constructor","modifiers":[],"name":"","nodeType":"FunctionDefinition","parameters":{"id":62,"nodeType":"ParameterList","parameters":[],"src":"460:2:1"},"returnParameters":{"id":63,"nodeType":"ParameterList","parameters":[],"src":"470:0:1"},"scope":150,"src":"449:63:1","stateMutability":"nonpayable","superFunction":null,"visibility":"public"},{"body":{"id":84,"nodeType":"Block","src":"549:37:1","statements":[{"expression":{"argumentTypes":null,"id":82,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":77,"name":"rate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59,"src":"554:4:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":81,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":78,"name":"rate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59,"src":"561:4:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"id":79,"name":"totalSupply","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":433,"src":"568:11:1","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":80,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"568:13:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"561:20:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"554:27:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":83,"nodeType":"ExpressionStatement","src":"554:27:1"}]},"documentation":null,"id":85,"implemented":true,"kind":"function","modifiers":[],"name":"stabilizeRate","nodeType":"FunctionDefinition","parameters":{"id":75,"nodeType":"ParameterList","parameters":[],"src":"539:2:1"},"returnParameters":{"id":76,"nodeType":"ParameterList","parameters":[],"src":"549:0:1"},"scope":150,"src":"517:69:1","stateMutability":"nonpayable","superFunction":null,"visibility":"public"},{"body":{"id":100,"nodeType":"Block","src":"660:36:1","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":95,"name":"from","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":87,"src":"675:4:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":96,"name":"to","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":89,"src":"681:2:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":97,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":91,"src":"685:5:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":94,"name":"_transfer","nodeType":"Identifier","overloadedDeclarations":[101],"referencedDeclaration":101,"src":"665:9:1","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,address,uint256)"}},"id":98,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"665:26:1","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":99,"nodeType":"ExpressionStatement","src":"665:26:1"}]},"documentation":null,"id":101,"implemented":true,"kind":"function","modifiers":[],"name":"_transfer","nodeType":"FunctionDefinition","parameters":{"id":92,"nodeType":"ParameterList","parameters":[{"constant":false,"id":87,"name":"from","nodeType":"VariableDeclaration","scope":101,"src":"610:12:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":86,"name":"address","nodeType":"ElementaryTypeName","src":"610:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":89,"name":"to","nodeType":"VariableDeclaration","scope":101,"src":"624:10:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":88,"name":"address","nodeType":"ElementaryTypeName","src":"624:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":91,"name":"value","nodeType":"VariableDeclaration","scope":101,"src":"636:13:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":90,"name":"uint256","nodeType":"ElementaryTypeName","src":"636:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"609:41:1"},"returnParameters":{"id":93,"nodeType":"ParameterList","parameters":[],"src":"660:0:1"},"scope":150,"src":"591:105:1","stateMutability":"nonpayable","superFunction":647,"visibility":"internal"},{"body":{"id":148,"nodeType":"Block","src":"743:431:1","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":108,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"expression":{"argumentTypes":null,"id":105,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":890,"src":"756:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":106,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"value","nodeType":"MemberAccess","referencedDeclaration":null,"src":"756:9:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"hexValue":"30","id":107,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"769:1:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"756:14:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"id":104,"name":"require","nodeType":"Identifier","overloadedDeclarations":[893,894],"referencedDeclaration":893,"src":"748:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$returns$__$","typeString":"function (bool) pure"}},"id":109,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"748:23:1","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":110,"nodeType":"ExpressionStatement","src":"748:23:1"},{"assignments":[112],"declarations":[{"constant":false,"id":112,"name":"numTokens","nodeType":"VariableDeclaration","scope":148,"src":"778:17:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":111,"name":"uint256","nodeType":"ElementaryTypeName","src":"778:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":118,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":116,"name":"rate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59,"src":"812:4:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"expression":{"argumentTypes":null,"id":113,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":890,"src":"798:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":114,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"value","nodeType":"MemberAccess","referencedDeclaration":null,"src":"798:9:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":115,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"mul","nodeType":"MemberAccess","referencedDeclaration":318,"src":"798:13:1","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":117,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"798:19:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"778:39:1"},{"assignments":[120],"declarations":[{"constant":false,"id":120,"name":"nextBalance","nodeType":"VariableDeclaration","scope":148,"src":"822:19:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":119,"name":"uint256","nodeType":"ElementaryTypeName","src":"822:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":129,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"expression":{"argumentTypes":null,"id":126,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":890,"src":"870:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":127,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"value","nodeType":"MemberAccess","referencedDeclaration":null,"src":"870:9:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":122,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":914,"src":"852:4:1","typeDescriptions":{"typeIdentifier":"t_contract$_TutorialToken_$150","typeString":"contract TutorialToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_TutorialToken_$150","typeString":"contract TutorialToken"}],"id":121,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"844:7:1","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":123,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"844:13:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":124,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":null,"src":"844:21:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":125,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"add","nodeType":"MemberAccess","referencedDeclaration":241,"src":"844:25:1","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":128,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"844:36:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"822:58:1"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":136,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":131,"name":"nextBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":120,"src":"916:11:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"argumentTypes":null,"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":133,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":914,"src":"938:4:1","typeDescriptions":{"typeIdentifier":"t_contract$_TutorialToken_$150","typeString":"contract TutorialToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_TutorialToken_$150","typeString":"contract TutorialToken"}],"id":132,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"930:7:1","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":134,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"930:13:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":135,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":null,"src":"930:21:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"916:35:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"id":130,"name":"require","nodeType":"Identifier","overloadedDeclarations":[893,894],"referencedDeclaration":893,"src":"908:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$returns$__$","typeString":"function (bool) pure"}},"id":137,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"908:44:1","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":138,"nodeType":"ExpressionStatement","src":"908:44:1"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"expression":{"argumentTypes":null,"id":140,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":890,"src":"966:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":141,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sender","nodeType":"MemberAccess","referencedDeclaration":null,"src":"966:10:1","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},{"argumentTypes":null,"id":142,"name":"numTokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":112,"src":"978:9:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address_payable","typeString":"address payable"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":139,"name":"_mint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":690,"src":"960:5:1","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":143,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"960:28:1","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":144,"nodeType":"ExpressionStatement","src":"960:28:1"},{"expression":{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"id":145,"name":"stabilizeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":85,"src":"1154:13:1","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$__$returns$__$","typeString":"function ()"}},"id":146,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1154:15:1","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":147,"nodeType":"ExpressionStatement","src":"1154:15:1"}]},"documentation":null,"id":149,"implemented":true,"kind":"function","modifiers":[],"name":"buyExampleToken","nodeType":"FunctionDefinition","parameters":{"id":102,"nodeType":"ParameterList","parameters":[],"src":"725:2:1"},"returnParameters":{"id":103,"nodeType":"ParameterList","parameters":[],"src":"743:0:1"},"scope":150,"src":"701:473:1","stateMutability":"payable","superFunction":null,"visibility":"public"}],"scope":151,"src":"139:1038:1"}],"src":"0:1177:1"},"legacyAST":{"absolutePath":"/C/Users/jimjb/capstone/Lehigh-ETC-Capstone/frontend/contracts/ERC20.sol","exportedSymbols":{"TutorialToken":[150]},"id":151,"nodeType":"SourceUnit","nodes":[{"id":36,"literals":["solidity","^","0.5",".0"],"nodeType":"PragmaDirective","src":"0:23:1"},{"absolutePath":"@openzeppelin/contracts/token/ERC20/ERC20.sol","file":"@openzeppelin/contracts/token/ERC20/ERC20.sol","id":37,"nodeType":"ImportDirective","scope":151,"sourceUnit":807,"src":"27:55:1","symbolAliases":[],"unitAlias":""},{"absolutePath":"@openzeppelin/contracts/math/SafeMath.sol","file":"@openzeppelin/contracts/math/SafeMath.sol","id":38,"nodeType":"ImportDirective","scope":151,"sourceUnit":402,"src":"84:51:1","symbolAliases":[],"unitAlias":""},{"baseContracts":[{"arguments":null,"baseName":{"contractScope":null,"id":39,"name":"ERC20","nodeType":"UserDefinedTypeName","referencedDeclaration":806,"src":"165:5:1","typeDescriptions":{"typeIdentifier":"t_contract$_ERC20_$806","typeString":"contract ERC20"}},"id":40,"nodeType":"InheritanceSpecifier","src":"165:5:1"}],"contractDependencies":[214,806,875],"contractKind":"contract","documentation":null,"fullyImplemented":true,"id":150,"linearizedBaseContracts":[150,806,875,214],"name":"TutorialToken","nodeType":"ContractDefinition","nodes":[{"id":43,"libraryName":{"contractScope":null,"id":41,"name":"SafeMath","nodeType":"UserDefinedTypeName","referencedDeclaration":401,"src":"181:8:1","typeDescriptions":{"typeIdentifier":"t_contract$_SafeMath_$401","typeString":"library SafeMath"}},"nodeType":"UsingForDirective","src":"175:27:1","typeName":{"id":42,"name":"uint256","nodeType":"ElementaryTypeName","src":"194:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"constant":false,"id":46,"name":"name","nodeType":"VariableDeclaration","scope":150,"src":"205:36:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_string_storage","typeString":"string"},"typeName":{"id":44,"name":"string","nodeType":"ElementaryTypeName","src":"205:6:1","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"value":{"argumentTypes":null,"hexValue":"5475746f7269616c546f6b656e","id":45,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"226:15:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_1e27d619d62987a17e3872af4db4b646569fa29e361d85623518cddc62d1e3b9","typeString":"literal_string \\"TutorialToken\\""},"value":"TutorialToken"},"visibility":"public"},{"constant":false,"id":49,"name":"symbol","nodeType":"VariableDeclaration","scope":150,"src":"245:27:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_string_storage","typeString":"string"},"typeName":{"id":47,"name":"string","nodeType":"ElementaryTypeName","src":"245:6:1","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"value":{"argumentTypes":null,"hexValue":"5454","id":48,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"268:4:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_2ac50a34f0da9360cfd7e529a34ccdaa61aa98e2a0ac0928bf981af8e73352ba","typeString":"literal_string \\"TT\\""},"value":"TT"},"visibility":"public"},{"constant":false,"id":52,"name":"decimals","nodeType":"VariableDeclaration","scope":150,"src":"276:25:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"},"typeName":{"id":50,"name":"uint8","nodeType":"ElementaryTypeName","src":"276:5:1","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"value":{"argumentTypes":null,"hexValue":"32","id":51,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"300:1:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"visibility":"public"},{"constant":false,"id":55,"name":"INITAL_SUPPLY","nodeType":"VariableDeclaration","scope":150,"src":"305:34:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":53,"name":"uint256","nodeType":"ElementaryTypeName","src":"305:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"argumentTypes":null,"hexValue":"313030","id":54,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"336:3:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_100_by_1","typeString":"int_const 100"},"value":"100"},"visibility":"public"},{"constant":false,"id":57,"name":"owner","nodeType":"VariableDeclaration","scope":150,"src":"370:20:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":56,"name":"address","nodeType":"ElementaryTypeName","src":"370:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"public"},{"constant":false,"id":59,"name":"rate","nodeType":"VariableDeclaration","scope":150,"src":"396:19:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":58,"name":"uint256","nodeType":"ElementaryTypeName","src":"396:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"public"},{"constant":false,"id":61,"name":"weiRaised","nodeType":"VariableDeclaration","scope":150,"src":"419:24:1","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":60,"name":"uint256","nodeType":"ElementaryTypeName","src":"419:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"public"},{"body":{"id":73,"nodeType":"Block","src":"470:42:1","statements":[{"expression":{"argumentTypes":null,"id":66,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":64,"name":"rate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59,"src":"475:4:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"hexValue":"3130","id":65,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"482:2:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"src":"475:9:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":67,"nodeType":"ExpressionStatement","src":"475:9:1"},{"expression":{"argumentTypes":null,"id":71,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":68,"name":"owner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":57,"src":"489:5:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"expression":{"argumentTypes":null,"id":69,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":890,"src":"497:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":70,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sender","nodeType":"MemberAccess","referencedDeclaration":null,"src":"497:10:1","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"489:18:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":72,"nodeType":"ExpressionStatement","src":"489:18:1"}]},"documentation":null,"id":74,"implemented":true,"kind":"constructor","modifiers":[],"name":"","nodeType":"FunctionDefinition","parameters":{"id":62,"nodeType":"ParameterList","parameters":[],"src":"460:2:1"},"returnParameters":{"id":63,"nodeType":"ParameterList","parameters":[],"src":"470:0:1"},"scope":150,"src":"449:63:1","stateMutability":"nonpayable","superFunction":null,"visibility":"public"},{"body":{"id":84,"nodeType":"Block","src":"549:37:1","statements":[{"expression":{"argumentTypes":null,"id":82,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":77,"name":"rate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59,"src":"554:4:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":81,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":78,"name":"rate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59,"src":"561:4:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"id":79,"name":"totalSupply","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":433,"src":"568:11:1","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":80,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"568:13:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"561:20:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"554:27:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":83,"nodeType":"ExpressionStatement","src":"554:27:1"}]},"documentation":null,"id":85,"implemented":true,"kind":"function","modifiers":[],"name":"stabilizeRate","nodeType":"FunctionDefinition","parameters":{"id":75,"nodeType":"ParameterList","parameters":[],"src":"539:2:1"},"returnParameters":{"id":76,"nodeType":"ParameterList","parameters":[],"src":"549:0:1"},"scope":150,"src":"517:69:1","stateMutability":"nonpayable","superFunction":null,"visibility":"public"},{"body":{"id":100,"nodeType":"Block","src":"660:36:1","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":95,"name":"from","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":87,"src":"675:4:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":96,"name":"to","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":89,"src":"681:2:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":97,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":91,"src":"685:5:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":94,"name":"_transfer","nodeType":"Identifier","overloadedDeclarations":[101],"referencedDeclaration":101,"src":"665:9:1","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,address,uint256)"}},"id":98,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"665:26:1","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":99,"nodeType":"ExpressionStatement","src":"665:26:1"}]},"documentation":null,"id":101,"implemented":true,"kind":"function","modifiers":[],"name":"_transfer","nodeType":"FunctionDefinition","parameters":{"id":92,"nodeType":"ParameterList","parameters":[{"constant":false,"id":87,"name":"from","nodeType":"VariableDeclaration","scope":101,"src":"610:12:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":86,"name":"address","nodeType":"ElementaryTypeName","src":"610:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":89,"name":"to","nodeType":"VariableDeclaration","scope":101,"src":"624:10:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":88,"name":"address","nodeType":"ElementaryTypeName","src":"624:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":91,"name":"value","nodeType":"VariableDeclaration","scope":101,"src":"636:13:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":90,"name":"uint256","nodeType":"ElementaryTypeName","src":"636:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"609:41:1"},"returnParameters":{"id":93,"nodeType":"ParameterList","parameters":[],"src":"660:0:1"},"scope":150,"src":"591:105:1","stateMutability":"nonpayable","superFunction":647,"visibility":"internal"},{"body":{"id":148,"nodeType":"Block","src":"743:431:1","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":108,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"expression":{"argumentTypes":null,"id":105,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":890,"src":"756:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":106,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"value","nodeType":"MemberAccess","referencedDeclaration":null,"src":"756:9:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"hexValue":"30","id":107,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"769:1:1","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"756:14:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"id":104,"name":"require","nodeType":"Identifier","overloadedDeclarations":[893,894],"referencedDeclaration":893,"src":"748:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$returns$__$","typeString":"function (bool) pure"}},"id":109,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"748:23:1","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":110,"nodeType":"ExpressionStatement","src":"748:23:1"},{"assignments":[112],"declarations":[{"constant":false,"id":112,"name":"numTokens","nodeType":"VariableDeclaration","scope":148,"src":"778:17:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":111,"name":"uint256","nodeType":"ElementaryTypeName","src":"778:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":118,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":116,"name":"rate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59,"src":"812:4:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"expression":{"argumentTypes":null,"id":113,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":890,"src":"798:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":114,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"value","nodeType":"MemberAccess","referencedDeclaration":null,"src":"798:9:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":115,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"mul","nodeType":"MemberAccess","referencedDeclaration":318,"src":"798:13:1","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":117,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"798:19:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"778:39:1"},{"assignments":[120],"declarations":[{"constant":false,"id":120,"name":"nextBalance","nodeType":"VariableDeclaration","scope":148,"src":"822:19:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":119,"name":"uint256","nodeType":"ElementaryTypeName","src":"822:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":129,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"expression":{"argumentTypes":null,"id":126,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":890,"src":"870:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":127,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"value","nodeType":"MemberAccess","referencedDeclaration":null,"src":"870:9:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":122,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":914,"src":"852:4:1","typeDescriptions":{"typeIdentifier":"t_contract$_TutorialToken_$150","typeString":"contract TutorialToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_TutorialToken_$150","typeString":"contract TutorialToken"}],"id":121,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"844:7:1","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":123,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"844:13:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":124,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":null,"src":"844:21:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":125,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"add","nodeType":"MemberAccess","referencedDeclaration":241,"src":"844:25:1","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$bound_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":128,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"844:36:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"822:58:1"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":136,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":131,"name":"nextBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":120,"src":"916:11:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"argumentTypes":null,"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":133,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":914,"src":"938:4:1","typeDescriptions":{"typeIdentifier":"t_contract$_TutorialToken_$150","typeString":"contract TutorialToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_TutorialToken_$150","typeString":"contract TutorialToken"}],"id":132,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"930:7:1","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":134,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"930:13:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":135,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":null,"src":"930:21:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"916:35:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"id":130,"name":"require","nodeType":"Identifier","overloadedDeclarations":[893,894],"referencedDeclaration":893,"src":"908:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$returns$__$","typeString":"function (bool) pure"}},"id":137,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"908:44:1","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":138,"nodeType":"ExpressionStatement","src":"908:44:1"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"expression":{"argumentTypes":null,"id":140,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":890,"src":"966:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":141,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sender","nodeType":"MemberAccess","referencedDeclaration":null,"src":"966:10:1","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},{"argumentTypes":null,"id":142,"name":"numTokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":112,"src":"978:9:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address_payable","typeString":"address payable"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":139,"name":"_mint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":690,"src":"960:5:1","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":143,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"960:28:1","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":144,"nodeType":"ExpressionStatement","src":"960:28:1"},{"expression":{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"id":145,"name":"stabilizeRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":85,"src":"1154:13:1","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$__$returns$__$","typeString":"function ()"}},"id":146,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1154:15:1","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":147,"nodeType":"ExpressionStatement","src":"1154:15:1"}]},"documentation":null,"id":149,"implemented":true,"kind":"function","modifiers":[],"name":"buyExampleToken","nodeType":"FunctionDefinition","parameters":{"id":102,"nodeType":"ParameterList","parameters":[],"src":"725:2:1"},"returnParameters":{"id":103,"nodeType":"ParameterList","parameters":[],"src":"743:0:1"},"scope":150,"src":"701:473:1","stateMutability":"payable","superFunction":null,"visibility":"public"}],"scope":151,"src":"139:1038:1"}],"src":"0:1177:1"},"compiler":{"name":"solc","version":"0.5.16+commit.9c3226ce.Emscripten.clang"},"networks":{},"schemaVersion":"3.1.0","updatedAt":"2020-09-03T15:55:37.371Z","devdoc":{"methods":{"allowance(address,address)":{"details":"See {IERC20-allowance}."},"approve(address,uint256)":{"details":"See {IERC20-approve}.     * Requirements:     * - `spender` cannot be the zero address."},"balanceOf(address)":{"details":"See {IERC20-balanceOf}."},"decreaseAllowance(address,uint256)":{"details":"Atomically decreases the allowance granted to `spender` by the caller.     * This is an alternative to {approve} that can be used as a mitigation for problems described in {IERC20-approve}.     * Emits an {Approval} event indicating the updated allowance.     * Requirements:     * - `spender` cannot be the zero address. - `spender` must have allowance for the caller of at least `subtractedValue`."},"increaseAllowance(address,uint256)":{"details":"Atomically increases the allowance granted to `spender` by the caller.     * This is an alternative to {approve} that can be used as a mitigation for problems described in {IERC20-approve}.     * Emits an {Approval} event indicating the updated allowance.     * Requirements:     * - `spender` cannot be the zero address."},"totalSupply()":{"details":"See {IERC20-totalSupply}."},"transfer(address,uint256)":{"details":"See {IERC20-transfer}.     * Requirements:     * - `recipient` cannot be the zero address. - the caller must have a balance of at least `amount`."},"transferFrom(address,address,uint256)":{"details":"See {IERC20-transferFrom}.     * Emits an {Approval} event indicating the updated allowance. This is not required by the EIP. See the note at the beginning of {ERC20};     * Requirements: - `sender` and `recipient` cannot be the zero address. - `sender` must have a balance of at least `amount`. - the caller must have allowance for `sender`\'s tokens of at least `amount`."}}},"userdoc":{"methods":{}}}')},151:function(e,t,n){e.exports=n.p+"static/media/gasLogo.62f80476.png"},246:function(e,t,n){e.exports=n(247)},247:function(e,t,n){"use strict";n.r(t);n(248),n(249);var a=n(0),r=n.n(a),i=n(31),s=n.n(i),l=n(94),o=n(29);s.a.render(r.a.createElement(o.a,null,r.a.createElement(l.a,null)),document.getElementById("root"))},249:function(e,t,n){},255:function(e,t){},256:function(e,t,n){},261:function(e,t,n){},263:function(e,t,n){},271:function(e,t){},273:function(e,t){},286:function(e,t){},288:function(e,t){},289:function(e,t){},307:function(e,t){},309:function(e,t){},338:function(e,t){},345:function(e,t){},348:function(e,t){},350:function(e,t,n){},352:function(e,t,n){},353:function(e,t,n){},354:function(e,t,n){},355:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){},373:function(e,t,n){},374:function(e,t,n){},375:function(e,t,n){},376:function(e,t,n){},377:function(e,t,n){},378:function(e,t,n){},379:function(e,t,n){},380:function(e,t,n){},381:function(e,t,n){},389:function(e,t){},398:function(e,t){},434:function(e,t){},472:function(e,t){},474:function(e,t){},480:function(e,t){},481:function(e,t){},484:function(e,t){},50:function(e,t,n){"use strict";(function(e){var a=n(1),r=n.n(a),i=n(4),s=n(13),l=n(12),o=n(70),f=n(148),c=n(94),u=function(){function t(){Object(s.a)(this,t),this.publicKey="",this.ethereum=void 0,this.publicKey="",this.ethereum=window.ethereum,this.ethereum&&this.ethereum.enable().then((function(){})).catch((function(e){}))}return Object(l.a)(t,[{key:"encrypt",value:function(){var t=Object(i.a)(r.a.mark((function t(n,a){var i,s,l=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.createFileData(n);case 3:return i=t.sent,s=null,console.log(a),console.log(i.letterType),t.abrupt("return",this.ethereum.request({method:"eth_getEncryptionPublicKey",params:[a]}).then((function(t){console.log("publicKey",t),l.publicKey=t;var n=o.bufferToHex(e.from(JSON.stringify(f.encrypt(l.publicKey,{data:JSON.stringify(i)},"x25519-xsalsa20-poly1305")),"utf8"));return console.log(n.length),s=n,Promise.resolve(s)})).catch((function(e){return console.log(e),Promise.resolve(s)})));case 10:return t.prev=10,t.t0=t.catch(0),console.log("error in file reader and/or encryption"),t.abrupt("return",Promise.reject("error in file reader and/or encryption"));case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"encryptSend",value:function(){var t=Object(i.a)(r.a.mark((function t(n,a){var i,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),t.prev=1,null,console.log(n.letterType),s=o.bufferToHex(e.from(JSON.stringify(f.encrypt(a,{data:JSON.stringify(n)},"x25519-xsalsa20-poly1305")),"utf8")),console.log(s.length),i=s,t.abrupt("return",Promise.resolve(i));case 10:return t.prev=10,t.t0=t.catch(1),console.log("error in file reader and/or encryption",t.t0),t.abrupt("return",Promise.reject("error in file reader and/or encryption"));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"hashFile",value:function(){var t=Object(i.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=o.bufferToHex(o.keccak256(e.from(n,"utf8"))),console.log("Hash is: "+a),t.abrupt("return",a);case 6:return t.prev=6,t.t0=t.catch(0),console.log("error in file reader and/or fileHash"),t.abrupt("return","error in file reader and/or fileHash");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},{key:"signLetter",value:function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){c.b.eth.personal.sign(t,n,"",(function(t,n){return t?(console.log("error when signing"),a(t)):(console.log("message signed"),e(n))})).then(console.log).catch((function(e){console.log()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sign",value:function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createFileData(t);case 3:return a=e.sent,null,i=JSON.stringify(a),e.abrupt("return",new Promise((function(e,t){c.b.eth.personal.sign(i,n,"",(function(n,a){return n?(console.log("error when signing"),t(n)):(console.log("message signed"),e(a))})).then(console.log).catch((function(e){console.log()}))})));case 9:return e.prev=9,e.t0=e.catch(0),console.log("error in file reader and/or digital signature"),e.abrupt("return",Promise.reject("error in file reader and/or digital signature"));case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"decrypt",value:function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),console.log(t),a={letterTitle:"",letterType:"invalid",letterUrl:""},e.abrupt("return",this.ethereum.request({method:"eth_decrypt",params:[t,n]}).then((function(e){return console.log(e.length),a=JSON.parse(e),console.log("parsed"),Promise.resolve(a)})).catch((function(e){return console.log(e),Promise.reject("failure to decrypt")})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createFileData",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={letterUrl:"",letterTitle:"",letterType:"invalid"},e.abrupt("return",new Promise((function(e,a){var r=new FileReader;void 0!==t&&(r.readAsDataURL(t),r.onload=function(i){"string"===typeof r.result?(console.log("letterUrl obtained"),n.letterTitle=t.name,n.letterType=t.type,n.letterUrl=r.result,e(n)):(console.log("error with reader.result type"),a("failed to get reader.result type string"))})})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPublicKey",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ethereum.request({method:"eth_getEncryptionPublicKey",params:[t]});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log("error in encrypting letter",e.t0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}]),t}();t.a=u}).call(this,n(11).Buffer)},500:function(e,t){},503:function(e,t){},508:function(e,t){},557:function(e,t,n){},558:function(e,t,n){},559:function(e,t,n){e.exports=n.p+"static/media/loginTutorial.e2545632.mp4"},560:function(e,t,n){e.exports=n.p+"static/media/requestorTutorial.8a62d19c.mp4"},561:function(e,t,n){e.exports=n.p+"static/media/writerTutorial.22f3b1d4.mp4"},562:function(e,t,n){e.exports=n.p+"static/media/recipientTutorial.e61c8b0f.mp4"},94:function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(13),s=n(12),l=n(16),o=n(15),f=n(35),c=n(17),u=n(4),p=n(0),d=n.n(p),m=n(27),y=(n(144),n(236)),h=n.n(y),b=n(29),g=n(80),v=n(39),E=n(110),T=(n(256),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).onConnect=n.onConnect.bind(Object(f.a)(n)),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"onConnect",value:function(){this.props.onConnect()}},{key:"render",value:function(){var e=this,t=this.props.loggedIn?"/dashboard":"/";return d.a.createElement(g.a,{bg:"dark",variant:"dark"},d.a.createElement(g.a.Brand,{onClick:function(){return!1},href:t},"ETC Reference Letter dApp"),d.a.createElement(g.a.Toggle,null),d.a.createElement(g.a.Collapse,{className:"justify-content-end"},!this.props.connectedTo&&d.a.createElement(E.a,{className:"connect",onClick:function(){e.onConnect()}},"Connect to Metamask"),this.props.connectedTo&&d.a.createElement(g.a.Text,{className:"navText"},"Connected to Metamask:"," ",d.a.createElement("span",null,this.props.connectedTo?this.props.user.publicAddress:"--"))),d.a.createElement(v.a,null,d.a.createElement(v.a.Toggle,{variant:"secondary",id:"dropdown-basic"},"Menu"),this.props.loggedIn&&d.a.createElement(v.a.Menu,{alignRight:!0},d.a.createElement(b.b,{to:"/",style:{textDecoration:"none"}},d.a.createElement("li",null,d.a.createElement(v.a.Item,{href:"#/action-0"},"Home"))),d.a.createElement(b.b,{to:"/dashboard",style:{textDecoration:"none"}},d.a.createElement("li",null,d.a.createElement(v.a.Item,{href:"#/action-2"},"Dashboard"))),d.a.createElement(b.b,{to:"/requestor",style:{textDecoration:"none"}},d.a.createElement("li",null,d.a.createElement(v.a.Item,{href:"#/action-3"},"Requestor"))),d.a.createElement(b.b,{to:"/writer",style:{textDecoration:"none"}},d.a.createElement("li",null,d.a.createElement(v.a.Item,{href:"#/action-4"},"Writer"))),d.a.createElement(b.b,{to:"/recipient",style:{textDecoration:"none"}},d.a.createElement("li",null,d.a.createElement(v.a.Item,{href:"#/action-5"},"Recipient"))),d.a.createElement(b.b,{to:"/faq",style:{textDecoration:"none"}},d.a.createElement("li",null,d.a.createElement(v.a.Item,{href:"#/action-5"},"FAQ")))),!this.props.loggedIn&&d.a.createElement(v.a.Menu,{alignRight:!0},d.a.createElement(b.b,{to:"/",style:{textDecoration:"none"}},d.a.createElement("li",null,d.a.createElement(v.a.Item,{href:"#/action-0"},"Home"))),d.a.createElement(b.b,{to:"/login",style:{textDecoration:"none"}},d.a.createElement("li",null,d.a.createElement(v.a.Item,{href:"#/action-1"},"Login"))),d.a.createElement(b.b,{to:"/faq",style:{textDecoration:"none"}},d.a.createElement("li",null,d.a.createElement(v.a.Item,{href:"#/action-2"},"FAQ"))))))}}]),t}(d.a.Component)),S=(n(261),new Headers);S.set("Access-Control-Allow-Origin","*"),S.set("Content-Type","application/json");var k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"home"},d.a.createElement(m.a,{to:"/login"}))}}]),t}(d.a.Component),w=n(242),x=n(571),I=n(570),_=n(22),O=n(20),C=n(576),N=n(575),j=n(568),D=n(238),P=n(573),A=(n(263),n(50)),M=n(240),L=n.n(M),V=function(){function e(t){Object(i.a)(this,e),this.memCache=new L.a.Cache,this.duration=void 0,this.duration=1e3*t*60}return Object(s.a)(e,[{key:"put",value:function(e,t){console.log("put",e,t),this.memCache.put(e,t,this.duration)}},{key:"get",value:function(e){return console.log("get",e),this.memCache.get(e)}}]),e}(),R=n(574),q=(n(350),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).cryptService=void 0,n.state={file:new File([],""),displayMessage:"",displayVariant:0,submitClicked:!1,buffering:!1,failedEncryption:!1},n.onFormSubmit=n.onFormSubmit.bind(Object(f.a)(n)),n.onChange=n.onChange.bind(Object(f.a)(n)),n.cryptService=new A.a,n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){console.log("file changed"),this.setState({file:e.target.files[0]})}},{key:"onFormSubmit",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n,a=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.file,console.log(t),t&&0!==t.size){e.next=7;break}console.log("no file uploaded"),this.setState({displayMessage:"No File Uploaded.",displayVariant:0,submitClicked:!0}),e.next=18;break;case 7:if(!this.props.restrictPdf||"application/pdf"===t.type){e.next=12;break}console.log("not a pdf"),this.setState({displayMessage:"Please Upload a PDF.",displayVariant:0,submitClicked:!0,file:new File([],"")}),e.next=18;break;case 12:if(!this.props.encrypt){e.next=18;break}return this.setState({displayMessage:"See Metamask to Upload",displayVariant:0,submitClicked:!0,failedEncryption:!1}),e.next=16,this.cryptService.encrypt(t,this.props.user.publicAddress);case 16:(n=e.sent)?(console.log("checking if upload to server"),this.setState({buffering:!0,displayMessage:"",submitClicked:!1}),setTimeout((function(){a.props.onEncryptedUpload(n)}),1e3)):(console.log("encryption failed"),this.setState({failedEncryption:!0,submitClicked:!1,displayMessage:"Failed to Encrypt",displayVariant:0}));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeDisplayMessage",value:function(e){this.setState({displayMessage:e})}},{key:"render",value:function(){var e=this,t=this.props.reUpload,n=this.state,a=n.displayMessage,r=n.displayVariant,i=n.submitClicked,s=(n.buffering,n.failedEncryption),l=n.file;return d.a.createElement(R.a,{onSubmit:this.onFormSubmit.bind(this)},d.a.createElement(R.a.Group,null,d.a.createElement("div",{className:"text-center mb-3"},"Upload"),d.a.createElement(R.a.File,{id:"fileUpload",className:"file-upload-form",label:l&&""!==l.name?l.name:t?"Change Your Upload":"Upload a New Letter","data-browse":"Select",onChange:this.onChange,custom:!0}),d.a.createElement("div",{className:"d-flex border-radius button-blur mb-2"},s&&d.a.createElement("div",{className:"flex-shrink-1 mt-4 mr-3"},d.a.createElement(N.a,{overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement(d.a.Fragment,null,d.a.createElement("div",null,"Please click ",d.a.createElement("em",null,"Provide")," on Metamask. We need your ",d.a.createElement("b",null,"Public Key")," to encrypt your letter. This keeps your letters secure so that only you can view it. See ",d.a.createElement("b",null,"End-to-End Encryption")," in the FAQs.")))},d.a.createElement(_.a,{icon:O.b,color:"yellow",size:"lg",className:"ml-3"}))),i&&d.a.createElement("div",{className:"flex-shrink-1 mt-4 mr-3"},d.a.createElement(N.a,{overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement(d.a.Fragment,null,l&&""!==l.name&&d.a.createElement("div",null,"We use ",d.a.createElement("b",null,"Metamask")," to get your ",d.a.createElement("b",null,"Public Key")," ","which we use to encrypt your letter. This makes your letter secure so that only you can view it. See"," ",d.a.createElement("b",null,"End-to-End Encryption")," in the FAQs."),l&&""===l.name&&d.a.createElement("div",null,"Please Upload a ",d.a.createElement("em",null,"Valid")," File. We keep your letter secure by submitClicked your letter with your"," ",d.a.createElement("b",null,"Public Key"),". See ",d.a.createElement("b",null,"End-to-End Encryption")," ","in the FAQs.")))},d.a.createElement(_.a,{icon:O.c,size:"lg",className:"ml-3"}))),0===r&&d.a.createElement("div",{className:"text-white mt-4 flex-fill "},a),1===r&&d.a.createElement("div",{className:"text-warning mt-4 flex-fill "},a),d.a.createElement(E.a,{className:"mt-3 mr-3 flex-shrink-1 float-right",variant:"outline-light",onClick:this.onFormSubmit},"Submit"),d.a.createElement(E.a,{className:"mt-3 flex-shrink-1 float-right",variant:"outline-light",onClick:function(t){e.props.onClose()}},"Close"))))}}]),t}(d.a.Component)),U=n(569),F=(n(352),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}}]),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user;return d.a.createElement("div",null,t&&d.a.createElement("div",{className:"d-flex mb-2"},d.a.createElement(C.a,{className:"flex-fill"},d.a.createElement("div",{className:"m-2"},d.a.createElement("div",{className:""},"Name: ",t.name))),d.a.createElement("div",{className:"ml-4 flex-shrink-1 float-right image-card"},d.a.createElement(U.a,{className:"profile-image",src:"https://engineering.lehigh.edu/sites/engineering.lehigh.edu/files/styles/faculty_photo/public/korth.jpg?itok=GfxQ6zFl"}))),!t&&d.a.createElement("div",{className:"d-flex justify-content-center"},d.a.createElement(I.a,{className:"float-right mt-4 mr-3",animation:"border",variant:"secondary"})),d.a.createElement(E.a,{className:"mt-3 float-right",onClick:function(t){e.props.onClose()}},"Close"))}}]),t}(d.a.Component)),$=(n(353),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={profileIsOpen:!1,selectedPublicAddress:""},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"openProfileModal",value:function(e){console.log("opening view modal");var t="/api/v1/users/".concat(e,"/profile");this.retrieveProfileFromServer(t)}},{key:"retrieveProfileFromServer",value:function(e){var t=this,n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})};fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(e),n).then((function(e){e.json().then((function(n){var a=n.data;console.log(e),a&&0!==a.length&&t.setState({selectedUserProfile:a[0],profileIsOpen:!0})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"closeProfileModal",value:function(){console.log("closing view modal"),this.setState({profileIsOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.fileData,a=t.loadingView,r=this.state.profileIsOpen;return d.a.createElement("div",null,d.a.createElement("div",{className:"mb-3"},n&&d.a.createElement("embed",{type:n.letterType,src:n.letterUrl,width:"100%",height:"500px"}),!n&&d.a.createElement(d.a.Fragment,null,a&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"d-flex justify-content-center"},d.a.createElement(N.a,{placement:"bottom",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement("div",null,"We use ",d.a.createElement("b",null,"Metamask")," to retrieve your letter"," ",d.a.createElement("em",null,"securely"),". Metamask uses your"," ",d.a.createElement("b",null,"Private Key")," to decrypt the letter. Learn more about ",d.a.createElement("b",null,"Encryption / Decryption")," in the FAQS."))},d.a.createElement(_.a,{icon:O.c,size:"lg",className:"mr-3"})),d.a.createElement("div",null,"See Metamask to Retrieve Your Letter"))),!a&&d.a.createElement("div",{className:"d-flex justify-content-center"},d.a.createElement(N.a,{placement:"bottom",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement("div",null,"Please click ",d.a.createElement("em",null,"Decrypt")," on Metamask to decrypt your letter. This is because we use end-to-end encryption to keep your letters secure. See"," ",d.a.createElement("b",null,"Encryption / Decryption")," in the FAQs."))},d.a.createElement(_.a,{icon:O.b,size:"lg"})),d.a.createElement("div",{className:"ml-3"},"Failed to Decrypt")))),d.a.createElement(E.a,{className:"mt-3 float-right",onClick:function(t){e.props.onClose()}},"Close"),d.a.createElement(P.a,{id:"profile-modal",show:r,onHide:this.closeProfileModal.bind(this),backdrop:"static",animation:!1,className:"modal",scrollable:!1,size:"sm"},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,"User Profile")),d.a.createElement(P.a.Body,null,this.state.selectedUserProfile&&d.a.createElement(F,{user:this.state.selectedUserProfile,onClose:this.closeProfileModal.bind(this)}))))}}]),t}(d.a.Component)),H=(n(354),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={confirmed:!1,customMessage:""},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"handleMessageChange",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,console.log(n),this.setState({customMessage:n});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.custom,n=this.state.confirmed;return d.a.createElement(w.a,null,!t&&d.a.createElement(x.a,null,"Submit Your Request?"),t&&d.a.createElement(x.a,null,d.a.createElement(R.a.Group,{controlId:"custom-message",className:"w-100"},d.a.createElement(R.a.Label,null,"Optional Custom Message"),d.a.createElement(R.a.Control,{type:"text",placeholder:"Type here . . . ",onChange:this.handleMessageChange.bind(this)}),d.a.createElement(R.a.Text,{className:"text-muted"},"This will be visible to the other user."))),d.a.createElement(x.a,{className:"d-flex justify-content-end"},d.a.createElement("div",{className:"mt-3 mr-3"},n&&d.a.createElement(I.a,{animation:"border",variant:"secondary"})),d.a.createElement(E.a,{disabled:n,className:"mt-3 mr-3 flex-shrink-1",onClick:function(t){e.setState({confirmed:!0}),e.props.onConfirm(e.state.customMessage)}},"Confirm"),d.a.createElement(E.a,{className:"mt-3 flex-shrink-1",onClick:function(t){e.props.onClose()}},"Back")))}}]),t}(d.a.Component)),z=n(95),B=(n(355),function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).cryptService=void 0;var a=[],r=n.props.unsentRecipientKeys;if(r)for(var s=0;s<r.length;s++)a.push(!1);return console.log(a),console.log(r),n.state={loadingContents:!0,failedLoad:!1,signingLetter:!1,failedSigning:!1,sending:!1,sendSuccess:!1,encrypted:a},n.cryptService=new A.a,n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/v1/letters/".concat(this.props.letter.letterId,"/contents/writer"),e.next=3,this.getLetterContents(this.props.letter.letterId,t);case 3:e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"encryptSignAndUpload",value:function(){var e=Object(u.a)(r.a.mark((function e(t,n){var a,i,s,l,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({failedLoad:!1,failedSigning:!1,sendSuccess:!1}),e.prev=1,console.log("Pub key is: "+n.publicKey),console.log("State url: "+this.state.encryptedLetter),this.state.encryptedLetter){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.cryptService.encryptSend(this.state.encryptedLetter,n.publicKey);case 8:return a=e.sent,console.log("Encrypted letter: "+a),this.setState({signingLetter:!0}),e.next=13,this.cryptService.signLetter("encrypted:"+a,this.props.user.publicAddress);case 13:return i=e.sent,this.setState({signingLetter:!1}),console.log("Signed letter: "+i),s={letterContents:a,letterSignature:i,letterRecipient:n.publicAddress},this.setState({sending:!0}),l="/api/v1/letters/".concat(this.props.letter.letterId,"/recipientContents/update"),e.next=21,this.uploadEncryptedLetterForm(l,s);case 21:e.sent?((o=Object(z.a)(this.state.encrypted))[t]=!0,this.setState({encrypted:o,sending:!1,sendSuccess:!0})):this.setState({sending:!1}),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),this.state.signingLetter?(console.log("failed signing"),this.setState({signingLetter:!1,sending:!1,failedSigning:!0})):this.state.sending?(console.log("failed upload"),this.setState({signingLetter:!1,sending:!1})):(console.log("failed encryption or other"),this.setState({signingLetter:!1,sending:!1}));case 28:case"end":return e.stop()}}),e,this,[[1,25]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"uploadEncryptedLetterForm",value:function(){var e=Object(u.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:n})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),a);case 4:if(400!==(i=e.sent).status){e.next=10;break}return console.log(i.status),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLetterContents",value:function(){var e=Object(u.a)(r.a.mark((function e(t,n){var a,i=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Letter Id: "+t),a={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},t,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(n),a).then((function(e){return e.json()})).then((function(e){var t=e.data;t?i.cryptService.decrypt(t,i.props.user.publicAddress).then((function(e){e&&i.setState({encryptedLetter:e,loadingContents:!1})})).catch((function(e){console.log("failed to decrypt letter"),i.setState({loadingContents:!1,failedLoad:!0})})):console.log("Letter retrieval in send failed")})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=(t.user,t.letter,t.unsentRecipientKeys),a=this.state,r=a.loadingContents,i=a.failedLoad,s=a.signingLetter,l=a.failedSigning,o=a.sending,f=a.sendSuccess,c=a.encrypted,u=[];if(n)for(var p=function(t){u.push(d.a.createElement(x.a,null,d.a.createElement(w.a,null,d.a.createElement(C.a,{className:"full-width opacity-0 mt-3"},d.a.createElement("div",{className:"d-flex justify-content-between"},d.a.createElement(C.a.Header,{className:"flex-fill send-entry",onClick:function(){c[t]||e.encryptSignAndUpload(t,n[t])}},n[t].name),c[t]&&d.a.createElement(N.a,{placement:"bottom",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement("div",null,"Letter has been sent!"))},d.a.createElement(_.a,{icon:O.a,size:"lg",className:"send-check-square"})),!c[t]&&d.a.createElement("div",{className:"send-check-square-placeholder"})))),t+1<n.length&&d.a.createElement(w.a,null,d.a.createElement(C.a,{className:"full-width opacity-0 mt-3"},d.a.createElement("div",{className:"d-flex justify-content-between"},d.a.createElement(C.a.Header,{className:"flex-fill send-entry",onClick:function(){c[t+1]||e.encryptSignAndUpload(t+1,n[t+1])}},n[t+1].name),c[t+1]&&d.a.createElement(N.a,{placement:"bottom",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement("div",null,"Letter has been sent!"))},d.a.createElement(_.a,{icon:O.a,size:"lg",className:"send-check-square"})),!c[t+1]&&d.a.createElement("div",{className:"send-check-square-placeholder"})))),t+1>=n.length&&d.a.createElement(w.a,null,d.a.createElement(C.a,{className:"full-width opacity-0 mt-3"},d.a.createElement("div",{className:"send-placeholder"})))))},m=0;m<n.length;m+=2)p(m);return d.a.createElement(d.a.Fragment,null,!r&&i&&d.a.createElement("div",{className:"d-flex justify-content-center mb-3"},d.a.createElement(N.a,{placement:"bottom",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement("div",null,"Please click ",d.a.createElement("em",null,"Decrypt")," on Metamask to retrieve your encrypted letter. This is because we use Metamask to keep your letters ",d.a.createElement("b",null,"secure")," and need to decrypt it before we can send it. This is step 1 of 3-step process. Learn more in the FAQs."))},d.a.createElement(_.a,{icon:O.b,size:"lg"})),d.a.createElement("div",{className:"ml-3"},"Failed to Retrieve Your Letter")),!r&&!i&&d.a.createElement(w.a,null,n&&d.a.createElement(d.a.Fragment,null,d.a.createElement(x.a,null,d.a.createElement(w.a,null,u))),(!n||0===n.length)&&d.a.createElement(x.a,{className:"d-flex justify-content-center"},d.a.createElement(I.a,{className:"float-right mt-4 mr-3",animation:"border",variant:"secondary"})),d.a.createElement(x.a,{className:"d-flex justify-content-between"},d.a.createElement("div",{className:"d-flex justify-content-between mt-4 ml-4 text-info float-left flex-fill"},s&&!o&&d.a.createElement("div",{className:"d-flex justify-content-between"},d.a.createElement(N.a,{placement:"bottom",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement("div",null,"We ask you to ",d.a.createElement("b",null,"sign")," your letter as"," ",d.a.createElement("b",null,"proof")," that this letter is from you. Your"," ",d.a.createElement("b",null,"signature")," will give the recipient confidence that the letter is authentic. Learn more about"," ",d.a.createElement("b",null,"Signing / Verification")," in the FAQS."))},d.a.createElement(_.a,{icon:O.c,size:"lg",className:"mr-3"})),d.a.createElement("div",null,"See Metamask to Sign Your Letter")),l&&!o&&!s&&d.a.createElement("div",{className:"d-flex justify-content-between"},d.a.createElement(N.a,{placement:"bottom",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement("div",null,"Please click ",d.a.createElement("em",null,"Sign")," on Metamask to sign your letter. Your ",d.a.createElement("b",null,"signature")," will give the recipient confidence that the letter is authentic. Learn more about ",d.a.createElement("b",null,"Signing / Verification")," in the FAQS."))},d.a.createElement(_.a,{icon:O.c,size:"lg"})),d.a.createElement("div",{className:"ml-3"},"Failed to Sign Your Letter")),o&&!s&&d.a.createElement("div",{className:"d-flex justify-content-between"},d.a.createElement(N.a,{placement:"bottom",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement("div",null,"Verifying your encrypted letter and the signature. Your ",d.a.createElement("b",null,"signature")," will give the recipient confidence that the letter is authentic. Learn more about ",d.a.createElement("b",null,"Signing / Verification")," in the FAQS."))},d.a.createElement(_.a,{icon:O.c,size:"lg",className:"mr-3"})),d.a.createElement("div",null," Sending Your Letter . . . ")),f&&!o&&!s&&d.a.createElement("div",{className:"d-flex justify-content-between"},d.a.createElement(N.a,{placement:"bottom",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement("div",null,"Your letter has been sent! You can continue to send letters to recipients or click ",d.a.createElement("b",null,"Close")," to finish the session. Learn more in the FAQS."))},d.a.createElement(_.a,{icon:O.c,size:"lg",className:"mr-3"})),d.a.createElement("div",null,"Your letter has been sent!"))),d.a.createElement("div",{className:"mt-3 mr-3 flex-shrink-1"},o&&d.a.createElement(I.a,{animation:"border",variant:"secondary"})),d.a.createElement(E.a,{className:"mt-3 flex-shrink-1",onClick:function(t){e.props.onClose()}},"Close"))),r&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"d-flex justify-content-center mb-3"},d.a.createElement(N.a,{placement:"bottom",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement("div",null,"We use Metamask to keep your letters ",d.a.createElement("b",null,"secure")," and"," ",d.a.createElement("b",null,"verifiable"),". To send your letter, we must 1. Retrieve and Decrypt your letter. 2. Encrypt your letter (",d.a.createElement("em",null,"w/ the Recipient's key"),") 3. Sign the Letter. Learn more about this proces in the FAQs."))},d.a.createElement(_.a,{icon:O.c,size:"lg"})),d.a.createElement("div",{className:"ml-3"},"See Metamask to start sending"))))}}]),t}(d.a.Component)),K=(n(356),function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).userProfiles=void 0;for(var a=[],r=0;r<n.props.history.length;r++)a.push(!1);return n.state={collapseIsOpen:a,profileIsOpen:!1},n.userProfiles=new Map,n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"closeProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing profile modal"),this.setState({profileIsOpen:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening profile modal"),n=this.userProfiles.get(t),console.log(n),void 0===n?(a="/api/v1/users/".concat(t,"/profile"),this.retrieveProfileFromServer(a)):this.setState({selectedUserProfile:n,profileIsOpen:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveProfileFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:return a=e.sent,e.next=7,a.json();case 7:i=e.sent,s=i.data,console.log(a),console.log(s),s&&0!==s.length&&(this.userProfiles.set(s[0].publicAddress,s[0]),this.setState({profileIsOpen:!0,selectedUserProfile:s[0]})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e,t=this,n=this.props.history,a=this.state,r=a.profileIsOpen,i=a.collapseIsOpen,s=[],l=function(e){s.push(d.a.createElement(x.a,null,d.a.createElement(w.a,null,d.a.createElement(C.a,{className:"full-width opacity-0 mt-3"},d.a.createElement("div",{className:"d-flex justify-content-between"},d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"history-entries"},i[e]?"Close details":"See history details")},d.a.createElement(C.a.Header,{className:"flex-fill history-entry",onClick:function(){var n=Object(z.a)(i);n[e]=!n[e],t.setState({collapseIsOpen:n})}},n[e].letterRecipient.name)),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},d.a.createElement("div",null,"View ",n[e].letterRecipient.name,"'s profile"))},d.a.createElement(C.a.Header,{className:"flex-shrink-1 history-collapse-button",onClick:function(){t.openProfileModal(n[e].letterRecipient.publicAddress)}})))),d.a.createElement(D.a,{in:i[e]},d.a.createElement("div",{className:"body-text text-white-50"},"Sent At: ",n[e].sentAt))),e+1<n.length&&d.a.createElement(w.a,null,d.a.createElement(C.a,{className:"full-width opacity-0 mt-3"},d.a.createElement("div",{className:"d-flex justify-content-between"},d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},i[e+1]?"Close details":"See history details")},d.a.createElement(C.a.Header,{className:"flex-fill history-entry",onClick:function(){var n=Object(z.a)(i);n[e+1]=!n[e+1],t.setState({collapseIsOpen:n})}},n[e+1].letterRecipient.name)),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},d.a.createElement("div",null,"View ",n[e+1].letterRecipient.name,"'s profile"))},d.a.createElement(C.a.Header,{className:"flex-shrink-1 history-collapse-button",onClick:function(){t.openProfileModal(n[e+1].letterRecipient.publicAddress)}})))),d.a.createElement(D.a,{in:i[e+1]},d.a.createElement("div",{className:"body-text text-white-50"},"Sent At: ",n[e+1].sentAt))),e+1>=n.length&&d.a.createElement(w.a,null,d.a.createElement(C.a,{className:"full-width opacity-0 mt-3"}),d.a.createElement(C.a.Header,{className:"d-flex justify-content-between history-placeholder"}))))},o=0;o<n.length;o+=2)l(o);return d.a.createElement("div",{className:"button-blur"},0===n.length&&d.a.createElement(w.a,null,d.a.createElement(x.a,null,d.a.createElement("h5",{className:"w-100 text-center"},"No History"))),0!==n.length&&d.a.createElement(d.a.Fragment,null,d.a.createElement(w.a,null,d.a.createElement(x.a,null,d.a.createElement("h5",null,"History")),d.a.createElement(x.a,null,d.a.createElement(w.a,{className:"history-display"},s)),d.a.createElement(x.a,{className:"d-flex mb-2"},d.a.createElement("div",{className:"mt-5 flex-shrink-1"},d.a.createElement(N.a,{placement:"right",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement("div",null,"Your letter ",d.a.createElement("b",null,"History")," indicates ",d.a.createElement("em",null,"who")," your letter has been sent to. You may view the profile of each recipient. See more in the FAQs."))},d.a.createElement(_.a,{icon:O.c,size:"lg"}))),d.a.createElement("div",{className:"flex-fill"}),d.a.createElement(N.a,{overlay:d.a.createElement(j.a,{id:"tooltip"},"Close letter history")},d.a.createElement(E.a,{className:"mt-3 float-right flex-shrink-1",variant:"outline-light",onClick:function(e){t.props.onClose()}},"Close")))),d.a.createElement(P.a,{id:"profile-modal",show:r,onHide:this.closeProfileModal.bind(this),animation:!1,className:"modal",scrollable:!1},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,null===(e=this.state.selectedUserProfile)||void 0===e?void 0:e.name)),d.a.createElement(P.a.Body,null,this.state.selectedUserProfile&&d.a.createElement(F,{user:this.state.selectedUserProfile,onClose:this.closeProfileModal.bind(this)})))))}}]),t}(d.a.Component)),W=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).uploadModal=d.a.createRef(),n.viewModal=d.a.createRef(),n.userProfiles=void 0,n.cryptService=void 0,n.cacheService=void 0,n.state={history:[],unsentRecipientKeys:[],loadingHistory:!1,loadingView:!1,loadingSend:!1,profileIsOpen:!1,historyIsOpen:!1,messageIsOpen:!1,uploadIsOpen:!1,sendIsOpen:!1,viewIsOpen:!1,confirmIsOpen:!1,collapseIsOpen:!1},n.userProfiles=new Map,n.cryptService=new A.a,n.cacheService=new V(1),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"openUploadModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening upload modal"),this.setState({uploadIsOpen:!0,collapseIsOpen:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onUploadSubmit",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="/api/v1/letters/".concat(this.props.letter.letterId,"/contents/update"),void 0===this.state.uploadedFile){e.next=4;break}return e.next=4,this.uploadContentsToServer(this.state.uploadedFile,n,t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closeUploadModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing upload modal"),this.setState({confirmIsOpen:!1,uploadIsOpen:!1,collapseIsOpen:this.state.historyIsOpen});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadContentsToServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t,n,a){var i=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("uploading to server"),fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(n),{body:JSON.stringify({auth:{publicAddress:this.props.user.publicAddress,jwtToken:this.props.user.jwtToken},data:{customMessage:a,encryptedFile:t}}),headers:{"Access-Control-Allow-Origin":"*","Content-type":"application/json"},method:"POST"}).then((function(e){console.log(e.status),200===e.status?(i.closeUploadModal(),i.props.onReload()):i.uploadModal.current.changeDisplayMessage("Upload Failed. Try Again Later.")})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"openSendModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({sendIsOpen:!0}),this.props.numUnsentRecipients>0&&null!==this.props.letter.uploadedAt&&(t="/api/v1/letters/".concat(this.props.letter.letterId,"/unsentRecipientKeys"),this.retrieveUnsentRecipientKeysFromServer(t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeSendModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({sendIsOpen:!1});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSendSubmit",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.closeSendModal(),this.props.onReload();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"retrieveUnsentRecipientKeysFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:if(400!==(a=e.sent).status){e.next=9;break}console.log(a.status),e.next=16;break;case 9:return e.next=11,a.json();case 11:i=e.sent,s=i.data,console.log(a),console.log(s),this.setState({unsentRecipientKeys:s.userKeys,loadingSend:!1});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"openViewModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("opening view modal"),this.setState({viewIsOpen:!0}),t=this.props.letter.letterId,n="/api/v1/letters/".concat(t,"/contents/writer"),console.log(t),null!==(a=this.cacheService.get(t))){e.next=11;break}this.setState({loadingView:!0}),this.retrieveLetterContentsFromServer(n),e.next=22;break;case 11:return e.prev=11,e.next=14,this.cryptService.decrypt(a,this.props.user.publicAddress);case 14:i=e.sent,console.log(i.letterType),this.setState({fileData:i}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(11),console.log("error with decryption");case 22:case"end":return e.stop()}}),e,this,[[11,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"closeViewModal",value:function(){console.log("closing view modal"),this.setState({viewIsOpen:!1,fileData:void 0})}},{key:"retrieveLetterContentsFromServer",value:function(e){var t=this;console.log("retrieving from server");var n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})};this.props.letter.letterId;fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(e),n).then((function(e){return console.log("logging response"),console.log(e),e.json()})).then((function(e){var n=e.data;n?t.cryptService.decrypt(n,t.props.user.publicAddress).then((function(e){e&&t.setState({viewIsOpen:!0,fileData:e})})).catch((function(e){t.setState({loadingView:!1})})):t.setState({viewIsOpen:!1})})).catch((function(e){console.log(e)}))}},{key:"openMessageModal",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({uploadedFile:t,messageIsOpen:!0}),this.openConfirmModal();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closeMessageModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({messageIsOpen:!1});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing profile modal"),this.setState({profileIsOpen:!1,selectedUserProfile:void 0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening profile modal"),n=this.userProfiles.get(t),console.log(n),void 0===n?(this.setState({profileIsOpen:!0}),a="/api/v1/users/".concat(t,"/profile"),this.retrieveProfileFromServer(a)):this.setState({selectedUserProfile:n,profileIsOpen:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveProfileFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:if(400!==(a=e.sent).status){e.next=9;break}console.log(a.status),e.next=16;break;case 9:return e.next=11,a.json();case 11:i=e.sent,s=i.data,console.log(a),console.log(s),s&&0!==s.length&&(this.userProfiles.set(s[0].publicAddress,s[0]),this.setState({selectedUserProfile:s[0]}));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"closeHistoryModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing history modal"),this.setState({historyIsOpen:!1,loadingHistory:!1,collapseIsOpen:this.state.viewIsOpen});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openHistoryModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening history modal"),0===this.state.history.length?(this.setState({loadingHistory:!0,historyIsOpen:!0,collapseIsOpen:!0}),t=this.props.letter.letterId,n="/api/v1/letters/".concat(t,"/history"),this.retrieveHistoryFromServer(n)):this.setState({historyIsOpen:!0,collapseIsOpen:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"retrieveHistoryFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:if(400!==(a=e.sent).status){e.next=10;break}console.log(a.status),this.setState({loadingHistory:!1}),e.next=17;break;case 10:return e.next=12,a.json();case 12:i=e.sent,s=i.data,console.log(a),console.log(s),s?this.setState({history:s,loadingHistory:!1}):(console.log("fetch for letterHistory failed"),this.setState({loadingHistory:!1}));case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),this.setState({loadingHistory:!1});case 23:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"openConfirmModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("open confirm modal"),this.setState({confirmIsOpen:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeConfirmModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("close confirm modal"),this.setState({confirmIsOpen:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,a,r,i,s,l=this,o=this.props,f=o.user,c=o.letter,u=o.numRecipients,p=o.numUnsentRecipients,m=this.state,y=m.history,h=m.loadingHistory,b=m.loadingView,g=(m.loadingSend,m.profileIsOpen),v=m.historyIsOpen,T=(m.messageIsOpen,m.uploadIsOpen),S=m.sendIsOpen,k=m.viewIsOpen,w=m.confirmIsOpen,x=m.collapseIsOpen,_=(m.unsentRecipientKeys,m.fileData);return d.a.createElement("div",null,d.a.createElement(C.a,{className:"full-width opacity-0"},d.a.createElement(C.a.Header,{className:"d-flex justify-content-between button-blur letter-entry",onClick:function(){return l.setState({collapseIsOpen:!x})}},d.a.createElement("div",{className:"flex-fill"},d.a.createElement("span",{className:"mr-3"},"For:"),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},d.a.createElement("div",null,"View ",null===(e=c.letterRequestor)||void 0===e?void 0:e.name,"'s profile"))},d.a.createElement(E.a,{variant:"outline-light",onClick:function(e){e.stopPropagation(),l.openProfileModal(c.letterRequestor.publicAddress)}},null===(t=c.letterRequestor)||void 0===t?void 0:t.name))),p>0&&null!==c.uploadedAt&&d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},"Send letter to recipients")},d.a.createElement(E.a,{variant:"outline-light",className:"flex-shrink-1 float-right ml-3",onClick:function(e){e.stopPropagation(),S?l.closeSendModal():l.openSendModal()}},"Send")),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},T?"Close upload":"Upload letter from device")},d.a.createElement(E.a,{disabled:u>0,variant:"outline-light",className:"flex-shrink-1 float-right ml-3",onClick:function(e){e.stopPropagation(),T?l.closeUploadModal():l.openUploadModal()}},"Upload")),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},"View letter for ",null===(n=c.letterRequestor)||void 0===n?void 0:n.name)},d.a.createElement(E.a,{disabled:null===c.uploadedAt,variant:"outline-light",className:"flex-shrink-1 float-right ml-3",onClick:function(e){e.stopPropagation(),k?l.closeViewModal():l.openViewModal()}},"View")),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},d.a.createElement("div",null,v?"Close letter history":"Check who it has been sent to"))},d.a.createElement(E.a,{disabled:0===u,variant:"outline-light",className:"flex-shrink-1 float-right ml-3",onClick:function(e){e.stopPropagation(),v?l.closeHistoryModal():l.openHistoryModal()}},"History")))),d.a.createElement(D.a,{in:x},d.a.createElement("div",{className:"collapse-body-select"},S&&d.a.createElement("div",null,"Send Letter Component"),T&&d.a.createElement("div",null,d.a.createElement(q,{ref:this.uploadModal,user:f,reUpload:null!==c.uploadedAt,restrictPdf:!0,encrypt:!0,onEncryptedUpload:this.openMessageModal.bind(this),onClose:this.closeUploadModal.bind(this)})),h&&d.a.createElement("div",{className:"d-flex justify-content-center"},d.a.createElement(I.a,{className:"mb-3",animation:"border",variant:"secondary"})),!h&&v&&d.a.createElement("div",{className:""},d.a.createElement(K,{user:f,history:y,onClose:this.closeHistoryModal.bind(this)})),!T&&!v&&d.a.createElement("div",{className:"display-text d-flex text-white-50"},d.a.createElement("div",{className:"flex-fill"},"Requested: ",null===(a=c.requestedAt)||void 0===a?void 0:a.toString()),c.uploadedAt&&d.a.createElement("div",{className:" flex-shrink-1 float-right"},"Uploaded: ",null===(r=c.uploadedAt)||void 0===r?void 0:r.toString()),!c.uploadedAt&&d.a.createElement("div",{className:" flex-shrink-1 float-right"},"You have not uploaded the letter")))),d.a.createElement(P.a,{id:"profile-modal",show:g,onHide:this.closeProfileModal.bind(this),animation:!1,className:"modal",scrollable:!1},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,null===(i=this.state.selectedUserProfile)||void 0===i?void 0:i.name)),d.a.createElement(P.a.Body,null,d.a.createElement(F,{user:this.state.selectedUserProfile,onClose:this.closeProfileModal.bind(this)}))),d.a.createElement(P.a,{id:"confirm-modal",show:w,onHide:this.closeConfirmModal.bind(this),animation:!1,className:"modal",scrollable:!1},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,"Please Confirm")),d.a.createElement(P.a.Body,null,d.a.createElement(H,{user:f,custom:!0,onConfirm:this.onUploadSubmit.bind(this),onClose:this.closeConfirmModal.bind(this)}))),d.a.createElement(P.a,{id:"send-modal",show:S,onHide:this.closeSendModal.bind(this),animation:!1,className:"modal",scrollable:!1},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,"Select a Recipient")),d.a.createElement(P.a.Body,null,d.a.createElement(B,{user:f,letter:this.props.letter,unsentRecipientKeys:this.state.unsentRecipientKeys,onClose:this.onSendSubmit.bind(this)}))),d.a.createElement(P.a,{id:"view-modal",show:k,onHide:this.closeViewModal.bind(this),backdrop:"static",animation:!1,className:"modal view-modal",scrollable:!1,size:"xl"},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,"For: ",null===(s=c.letterRequestor)||void 0===s?void 0:s.name)),d.a.createElement(P.a.Body,null,d.a.createElement($,{fileData:_,loadingView:b,ref:this.viewModal,user:f,onClose:this.closeViewModal.bind(this)}))))}}]),t}(d.a.Component),J=(n(357),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={letters:[],numRecipients:[],numUnsentRecipients:[],loadingLetters:!0},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.loadLetterList()}},{key:"loadLetterList",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/v1/letters/written",t={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat("/api/v1/letters/written"),t).then((function(e){e.json().then((function(t){var a=t.data;console.log(e),a&&a.letters&&a.numRecipients?n.setState({letters:a.letters,numRecipients:a.numRecipients,numUnsentRecipients:a.numUnsentRecipients,loadingLetters:!1}):n.setState({loadingLetters:!1})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.user,n=this.state,a=n.letters,r=n.numRecipients,i=n.numUnsentRecipients,s=n.loadingLetters,l=a.map((function(n,a){return d.a.createElement(W,{user:t,letter:n,numRecipients:r[a],numUnsentRecipients:i[a],onReload:e.loadLetterList.bind(e)})})),o=d.a.createElement("div",{className:"writer-letters"},d.a.createElement("div",{className:"writer-header"},d.a.createElement("h3",null," Writer ")),d.a.createElement("div",{className:"writer-letterslist"},l)),f=d.a.createElement("div",{className:"writer-footer button-blur-no-border text-white-50"},d.a.createElement("span",null," Product of Team Gas"),d.a.createElement(E.a,{variant:"outline-light",onClick:function(){e.setState({letters:[],loadingLetters:!0}),e.loadLetterList()}},d.a.createElement(_.a,{icon:O.d})));return d.a.createElement(d.a.Fragment,null,!s&&0!==a.length&&d.a.createElement(w.a,{className:"writer"},d.a.createElement(x.a,null,o),d.a.createElement(x.a,null,f)),!s&&0===a.length&&d.a.createElement("div",{className:"writer-header absolute-center"},d.a.createElement("h3",null," No Letters Requested ")),s&&d.a.createElement("div",{className:"d-flex justify-content-center absolute-center"},d.a.createElement(I.a,{className:"",animation:"border",variant:"secondary"})))}}]),t}(d.a.Component)),Y=n(572),Q=n(113),G=(n(373),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).userProfiles=void 0,n.state={selectedRecipients:n.props.previouslySelectedRecipients,profileIsOpen:!1},n.userProfiles=new Map,n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"closeProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing profile modal"),this.setState({profileIsOpen:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening profile modal"),n=this.userProfiles.get(t),console.log(n),void 0===n?(a="/api/v1/users/".concat(t,"/profile"),this.retrieveProfileFromServer(a)):this.setState({selectedUserProfile:n,profileIsOpen:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveProfileFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:return a=e.sent,e.next=7,a.json();case 7:i=e.sent,s=i.data,console.log(a),console.log(s),s&&0!==s.length&&(this.userProfiles.set(s[0].publicAddress,s[0]),this.setState({profileIsOpen:!0,selectedUserProfile:s[0]})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onSelectSubmit",value:function(){console.log("select submit"),this.props.onSubmit(this.state.selectedRecipients)}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.users,r=n.header,i=n.previouslySelectedRecipients,s=this.state,l=s.profileIsOpen,o=s.selectedRecipients,f=d.a.createElement(p.Fragment,null,d.a.createElement(Y.a,{className:"border-radius mb-0"},d.a.createElement("div",{className:"multiple-typeahead recipient-typeahead"},d.a.createElement(Q.a,{id:"select-recipients-typeahead",multiple:!0,labelKey:"name",filterBy:["name","publicAddress"],options:a,paginate:!0,selected:o,onChange:function(e){console.log(e),t.setState({selectedRecipients:e})},renderMenuItemChildren:function(e){return"".concat(e.name," (").concat(e.publicAddress.slice(0,6)," . . . )")}})))),c=[];if(o)for(var u=function(e){c.push(d.a.createElement(x.a,null,d.a.createElement(w.a,null,d.a.createElement("div",{className:"d-flex justify-content-between recipient-entry"},d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},d.a.createElement("div",null,"View ",o[e].name,"'s profile"))},d.a.createElement("div",{className:"flex-fill body-text",onClick:function(){return t.openProfileModal(o[e].publicAddress)}},o[e].name)))),e+1<o.length&&d.a.createElement(w.a,null,d.a.createElement("div",{className:"d-flex justify-content-between recipient-entry"},d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},d.a.createElement("div",null,"View ",o[e+1].name,"'s profile"))},d.a.createElement("div",{className:"flex-fill body-text",onClick:function(){return t.openProfileModal(o[e+1].publicAddress)}},o[e+1].name)))),e+1>=o.length&&d.a.createElement(w.a,null,d.a.createElement(C.a.Header,{className:"d-flex justify-content-between recipient-placeholder"})),e+2<o.length&&d.a.createElement(w.a,null,d.a.createElement("div",{className:"d-flex justify-content-between recipient-entry"},d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},d.a.createElement("div",null,"View ",o[e+2].name,"'s profile"))},d.a.createElement("div",{className:"flex-fill body-text",onClick:function(){return t.openProfileModal(o[e+2].publicAddress)}},o[e+2].name)))),e+2>=o.length&&d.a.createElement(w.a,null,d.a.createElement(C.a.Header,{className:"d-flex justify-content-between recipient-placeholder"}))))},m=0;m<o.length;m+=3)u(m);return d.a.createElement("div",null,d.a.createElement(x.a,null,d.a.createElement("h5",null,r)),d.a.createElement("div",{className:"mb-3"},f),0!==o.length&&d.a.createElement(w.a,{className:"recipient-display mb-3"},c),d.a.createElement("div",{className:"d-flex border-radius button-blur mb-2"},d.a.createElement("div",{className:"mt-3"},d.a.createElement(N.a,{placement:"right",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement(d.a.Fragment,null,"Select Recipients"===r&&d.a.createElement("div",null,"Please indicate a list of intended recipients. This recipient list can be updated in ",d.a.createElement("b",null,"Edit"),". Note that once the letter is sent to a recipient, the recipient will be moved into ",d.a.createElement("b",null,"History"),". Learn more in the FAQs."),"Edit Recipients"===r&&d.a.createElement("div",null,"You may add and remove intended recipients. Note that once the writer uploads and sends your letter to a recipient, the recipient will be moved into"," ",d.a.createElement("b",null,"History"),". Learn more in the FAQs.")))},d.a.createElement(_.a,{icon:O.c,size:"lg"}))),d.a.createElement("div",{className:"flex-fill"}),0!==o.length&&d.a.createElement(N.a,{overlay:d.a.createElement(j.a,{id:"tooltip"},"Select ",o.length," recipients")},d.a.createElement(E.a,{variant:"outline-light",className:"flex-shrink-1 float-right",onClick:function(){t.props.onSubmit(o)}},"Submit")),0===o.length&&d.a.createElement(N.a,{overlay:d.a.createElement(j.a,{id:"tooltip"},"Select no recipients for now")},d.a.createElement("span",{className:"d-inline-block"},d.a.createElement(E.a,{variant:"outline-light",className:"flex-shrink-1 float-right",onClick:function(){t.props.onSubmit(o)}},"Submit"))),d.a.createElement(N.a,{overlay:d.a.createElement(j.a,{id:"tooltip"},"Edit Recipients"===r?"Reset to previous":"Clear all selected recipients")},d.a.createElement(E.a,{variant:"outline-light",className:"flex-shrink-1 ml-3",onClick:function(){t.setState({selectedRecipients:i})}},"Edit Recipients"===r?"Reset":"Clear")),d.a.createElement(N.a,{overlay:d.a.createElement(j.a,{id:"tooltip"},"Cancel new request")},d.a.createElement(E.a,{variant:"outline-light",className:"flex-shrink-1 float-right ml-3",onClick:function(){t.props.onClose()}},"Close"))),d.a.createElement(P.a,{id:"profile-modal",show:l,onHide:this.closeProfileModal.bind(this),animation:!1,className:"modal",scrollable:!1},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,null===(e=this.state.selectedUserProfile)||void 0===e?void 0:e.name)),d.a.createElement(P.a.Body,null,this.state.selectedUserProfile&&d.a.createElement(F,{user:this.state.selectedUserProfile,onClose:this.closeProfileModal.bind(this)}))))}}]),t}(d.a.Component)),X=(n(374),H),Z=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).userProfiles=void 0,n.state={history:[],loadingHistory:!1,loadingSelect:!1,selectIsOpen:!1,profileIsOpen:!1,historyIsOpen:!1,uploadIsOpen:!1,confirmIsOpen:!1,collapseIsOpen:!1,previouslySelectedRecipients:[],sentRecipients:[],selectedRecipients:[]},n.userProfiles=new Map,n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"onSelectSubmit",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("on select submit"),n="/api/v1/letters/".concat(this.props.letter.letterId,"/updateRecipients"),this.sendUpdatedLetterRecipientsToServer(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendUpdatedLetterRecipientsToServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:this.state.selectedRecipients})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:if(400!==(a=e.sent).status){e.next=9;break}console.log(a.status),e.next=16;break;case 9:return e.next=11,a.json();case 11:i=e.sent,s=i.data,console.log(a),console.log(s),s&&this.setState({selectIsOpen:!1,confirmIsOpen:!1,collapseIsOpen:this.state.historyIsOpen,previouslySelectedRecipients:s});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"closeSelectModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing select modal"),this.setState({selectIsOpen:!1,loadingSelect:!1,collapseIsOpen:this.state.historyIsOpen});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openSelectModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("on send click"),t="/api/v1/letters/".concat(this.props.letter.letterId,"/unsentRecipients"),n="/api/v1/letters/".concat(this.props.letter.letterId,"/sentRecipients"),0!==this.state.previouslySelectedRecipients.length){e.next=11;break}return this.setState({loadingSelect:!0,collapseIsOpen:!0,selectIsOpen:!0}),e.next=7,this.retrieveUnsentRecipientsFromServer(t);case 7:return e.next=9,this.retrieveSentRecipientsFromServer(n);case 9:e.next=12;break;case 11:this.setState({selectIsOpen:!0,collapseIsOpen:!0});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"retrieveUnsentRecipientsFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:if(400!==(a=e.sent).status){e.next=10;break}console.log(a.status),this.setState({loadingSelect:!1}),e.next=17;break;case 10:return e.next=12,a.json();case 12:i=e.sent,s=i.data,console.log(a),console.log(s),this.setState({previouslySelectedRecipients:s});case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),this.setState({loadingSelect:!1});case 23:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveSentRecipientsFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:if(400!==(a=e.sent).status){e.next=10;break}console.log(a.status),this.setState({loadingSelect:!1}),e.next=17;break;case 10:return e.next=12,a.json();case 12:i=e.sent,s=i.data,console.log(a),console.log(s),s?this.setState({sentRecipients:s,loadingSelect:!1}):this.setState({loadingSelect:!1});case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),this.setState({loadingSelect:!1});case 23:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"openMessageModal",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({selectedRecipients:t}),this.openConfirmModal();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closeMessageModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"closeProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing profile modal"),this.setState({profileIsOpen:!1,selectedUserProfile:void 0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening profile modal"),n=this.userProfiles.get(t),console.log(n),void 0===n?(this.setState({profileIsOpen:!0}),a="/api/v1/users/".concat(t,"/profile"),this.retrieveProfileFromServer(a)):this.setState({selectedUserProfile:n,profileIsOpen:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveProfileFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:if(400!==(a=e.sent).status){e.next=9;break}console.log(a.status),e.next=16;break;case 9:return e.next=11,a.json();case 11:i=e.sent,s=i.data,console.log(a),console.log(s),s&&0!==s.length&&(this.userProfiles.set(s[0].publicAddress,s[0]),this.setState({selectedUserProfile:s[0]}));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"closeHistoryModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing history modal"),this.setState({historyIsOpen:!1,loadingHistory:!1,collapseIsOpen:this.state.selectIsOpen});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openHistoryModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening history modal"),0===this.state.history.length?(this.setState({loadingHistory:!0,historyIsOpen:!0,collapseIsOpen:!0}),t=this.props.letter.letterId,n="/api/v1/letters/".concat(t,"/history"),this.retrieveHistoryFromServer(n)):this.setState({historyIsOpen:!0,collapseIsOpen:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"retrieveHistoryFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:if(400!==(a=e.sent).status){e.next=10;break}console.log(a.status),this.setState({loadingHistory:!1}),e.next=17;break;case 10:return e.next=12,a.json();case 12:i=e.sent,s=i.data,console.log(a),console.log(s),s?this.setState({history:s,loadingHistory:!1}):(console.log("fetch for letterHistory failed"),this.setState({loadingHistory:!1}));case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),this.setState({loadingHistory:!1});case 23:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"openConfirmModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("open confirm modal"),this.setState({confirmIsOpen:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeConfirmModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("close confirm modal"),this.setState({confirmIsOpen:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,a,r,i=this,s=this.props,l=s.user,o=s.letter,f=s.numRecipients,c=s.users,u=this.state,p=u.history,m=u.loadingSelect,y=u.loadingHistory,h=u.selectIsOpen,b=u.profileIsOpen,g=u.historyIsOpen,v=(u.uploadIsOpen,u.confirmIsOpen),T=u.collapseIsOpen,S=(u.previouslySelectedRecipients,u.sentRecipients);u.selectedRecipients,u.selectedPublicAddress;return d.a.createElement("div",null,d.a.createElement(C.a,{className:"full-width opacity-0"},d.a.createElement(C.a.Header,{className:"d-flex justify-content-between button-blur letter-entry",onClick:function(){return i.setState({collapseIsOpen:!T})}},d.a.createElement("div",{className:"flex-fill"},d.a.createElement("span",{className:"mr-3"},"From:"),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},d.a.createElement("div",null,"View ",null===(e=o.letterWriter)||void 0===e?void 0:e.name,"'s profile"))},d.a.createElement(E.a,{variant:"outline-light",onClick:function(e){e.stopPropagation(),i.openProfileModal(o.letterWriter.publicAddress)}},null===(t=o.letterWriter)||void 0===t?void 0:t.name))),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-button"},d.a.createElement("div",null,h?"Close edit":"Edit the list of intended recipients"))},d.a.createElement(E.a,{variant:"outline-light",className:"flex-shrink-1 float-right ml-3",onClick:function(e){e.stopPropagation(),h?i.closeSelectModal():i.openSelectModal()}},"Edit")),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-button"},d.a.createElement("div",null,g?"Close letter history":"Check who it has been sent to"))},d.a.createElement("span",null,d.a.createElement(E.a,{disabled:0===f,variant:"outline-light",className:"flex-shrink-1 float-right ml-3",onClick:function(e){e.stopPropagation(),g?i.closeHistoryModal():i.openHistoryModal()}},"History"))))),d.a.createElement(D.a,{in:T},d.a.createElement("div",{className:"collapse-body-select"},m&&d.a.createElement("div",{className:"d-flex justify-content-center"},d.a.createElement(I.a,{className:"mb-3",animation:"border",variant:"secondary"})),!m&&h&&d.a.createElement("div",null,d.a.createElement(G,{user:l,previouslySelectedRecipients:this.state.previouslySelectedRecipients,header:"Edit Recipients",onClose:this.closeSelectModal.bind(this),onSubmit:this.openMessageModal.bind(this),users:c.filter((function(e){var t=e.publicAddress!==o.letterWriter.publicAddress;if(t)for(var n=0;n<S.length;n++){var a;t=e.publicAddress!==(null===(a=S[n])||void 0===a?void 0:a.publicAddress)}return t}))})),y&&d.a.createElement("div",{className:"d-flex justify-content-center"},d.a.createElement(I.a,{className:"mb-3",animation:"border",variant:"secondary"})),!y&&g&&d.a.createElement("div",{className:""},d.a.createElement(K,{user:l,history:p,onClose:this.closeHistoryModal.bind(this)})),!h&&!g&&d.a.createElement("div",{className:"display-text d-flex text-white-50"},d.a.createElement("div",{className:"flex-fill"},"Requested: ",null===(n=o.requestedAt)||void 0===n?void 0:n.toString()),o.uploadedAt&&d.a.createElement("div",{className:" flex-shrink-1 float-right"},"Uploaded: ",null===(a=o.uploadedAt)||void 0===a?void 0:a.toString()),!o.uploadedAt&&d.a.createElement("div",{className:" flex-shrink-1 float-right"},"Your letter has not been uploaded")))),d.a.createElement(P.a,{id:"profile-modal",show:b,onHide:this.closeProfileModal.bind(this),animation:!1,className:"modal",scrollable:!1},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,null===(r=this.state.selectedUserProfile)||void 0===r?void 0:r.name)),d.a.createElement(P.a.Body,null,d.a.createElement(F,{user:this.state.selectedUserProfile,onClose:this.closeProfileModal.bind(this)}))),d.a.createElement(P.a,{id:"confirm-modal",show:v,onHide:this.closeConfirmModal.bind(this),animation:!1,className:"modal",scrollable:!1},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,"Please Confirm")),d.a.createElement(P.a.Body,null,d.a.createElement(X,{user:this.props.user,custom:!1,onConfirm:this.onSelectSubmit.bind(this),onClose:this.closeConfirmModal.bind(this)}))))}}]),t}(d.a.Component),ee=(n(375),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).writerTypeahead=d.a.createRef(),n.state={users:[],letters:[],numRecipients:[],loadingLetters:!0,dualMode:!1,loadingSelect:!1,selectIsOpen:!1,messageIsOpen:!1,confirmIsOpen:!1,selectedWriter:[],selectedRecipients:[]},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.loadUsersList(),this.loadLettersList()}},{key:"loadUsersList",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/v1/users",t={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat("/api/v1/users"),t).then((function(e){e.json().then((function(t){var a=t.data;console.log(e),console.log(t.data),a?n.setState({users:a}):console.log("problem with response data for requestor")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadLettersList",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/v1/letters/requested",t={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat("/api/v1/letters/requested"),t).then((function(e){e.json().then((function(t){var a=t.data;console.log(e),console.log(t.data),a&&a.letters&&a.numRecipients?n.setState({letters:a.letters,numRecipients:a.numRecipients,loadingLetters:!1}):n.setState({loadingLetters:!1})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeSelectModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing select modal"),this.setState({selectIsOpen:!1,selectedWriter:[],dualMode:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openSelectModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening select modal"),0!==this.state.selectedWriter.length&&this.setState({selectIsOpen:!0,dualMode:!0,selectedRecipients:[]});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSelectSubmit",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("on select submit"),"/api/v1/letters/create",this.sendNewLetterRequestToServer("/api/v1/letters/create",t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendNewLetterRequestToServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t,n){var a,i,s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{selectedRecipients:this.state.selectedRecipients,letterWriter:this.state.selectedWriter[0].publicAddress,customMessage:n}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),a);case 4:if(400!==(i=e.sent).status){e.next=9;break}console.log(i.status),e.next=16;break;case 9:return e.next=11,i.json();case 11:s=e.sent,l=s.data,console.log(i),console.log(l),l&&this.setState({confirmIsOpen:!1,letters:l.letters,numRecipients:l.numRecipients,selectIsOpen:!1,dualMode:!1,selectedWriter:[]});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"openMessageModal",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({selectedRecipients:t}),this.openConfirmModal();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closeMessageModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"openConfirmModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("open confirm modal"),this.setState({confirmIsOpen:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeConfirmModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("close confirm modal"),this.setState({confirmIsOpen:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.user,n=this.state,a=n.users,r=n.letters,i=n.numRecipients,s=n.loadingLetters,l=n.dualMode,o=n.selectIsOpen,f=(n.messageIsOpen,n.confirmIsOpen),c=n.selectedWriter,u=this.state.users,m=d.a.createElement(p.Fragment,null,d.a.createElement(Y.a,{className:"d-flex justify-content-between border-radius button-blur mb-0"},d.a.createElement("div",{className:"flex-fill single-typeahead",onClick:function(){e.setState({selectedWriter:[]})}},d.a.createElement(Q.a,{id:"select-writer-typeahead",labelKey:"name",filterBy:["name","publicAddress"],options:u,placeholder:"Select a Writer",paginate:!0,selected:this.state.selectedWriter,onChange:function(t){console.log("selected",t),e.setState({selectedWriter:t,selectIsOpen:!0,dualMode:!0})},renderMenuItemChildren:function(e){return"".concat(e.name," (").concat(e.publicAddress.slice(0,6)," . . . )")},ref:this.writerTypeahead})))),y=r.map((function(e,n){return d.a.createElement(Z,{user:t,letter:e,numRecipients:i[n],users:a})})),h=d.a.createElement("div",{className:"requestor-select"},d.a.createElement("div",{className:"requestor-header"},d.a.createElement("h3",{className:"mb-3"},"New Request")),d.a.createElement(C.a.Header,{className:"requestor-select-writer"},d.a.createElement("div",null,m)),o&&1===c.length&&d.a.createElement("div",{className:"collapse-body-select"},d.a.createElement(G,{user:this.props.user,previouslySelectedRecipients:[],header:"Select Recipients",onClose:this.closeSelectModal.bind(this),onSubmit:this.openMessageModal.bind(this),users:this.state.users.filter((function(e){return e.publicAddress!==c[0].publicAddress}))}))),b=d.a.createElement("div",{className:"requestor-letters"},d.a.createElement("h3",null," ",0!==r.length?"Requests":""," "),d.a.createElement("div",{className:"requestor-letterslist"},y)),g=d.a.createElement("div",{className:"requestor-footer button-blur-no-border text-white-50"},d.a.createElement("span",null," Product of Team Gas"),d.a.createElement(E.a,{variant:"outline-light",onClick:function(){e.setState({letters:[],loadingLetters:!0}),e.loadLettersList()}},d.a.createElement(_.a,{icon:O.d})));return d.a.createElement(d.a.Fragment,null,!s&&0===r.length&&d.a.createElement(w.a,{className:"requestor"},d.a.createElement(x.a,null,h),d.a.createElement(x.a,null,g)),!s&&!l&&0!==r.length&&d.a.createElement(w.a,{className:"requestor"},d.a.createElement(x.a,null,h),d.a.createElement(x.a,null,b),d.a.createElement(x.a,null,g)),!s&&l&&0!==r.length&&d.a.createElement(w.a,{className:"requestor-dual"},d.a.createElement(x.a,null,d.a.createElement(w.a,{className:"ml-5 mr-5"},d.a.createElement(x.a,null,h)),d.a.createElement(w.a,{className:"mr-5 ml-5"},d.a.createElement(x.a,null,b))),d.a.createElement(x.a,null,g)),s&&d.a.createElement("div",{className:"d-flex justify-content-center absolute-center"},d.a.createElement(I.a,{className:"",animation:"border",variant:"secondary"})),d.a.createElement(P.a,{id:"confirm-modal",show:f,onHide:this.closeConfirmModal.bind(this),animation:!1,className:"modal",scrollable:!1},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,"Please Confirm")),d.a.createElement(P.a.Body,null,d.a.createElement(X,{user:this.props.user,custom:!0,onConfirm:this.onSelectSubmit.bind(this),onClose:this.closeConfirmModal.bind(this)}))))}}]),t}(d.a.Component)),te=(n(376),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).uploadModal=d.a.createRef(),n.viewModal=d.a.createRef(),n.userProfiles=void 0,n.cryptService=void 0,n.cacheService=void 0,n.state={history:[],loadingHistory:!1,loadingView:!1,profileIsOpen:!1,historyIsOpen:!1,uploadIsOpen:!1,viewIsOpen:!1,confirmIsOpen:!1,collapseIsOpen:!1},n.userProfiles=new Map,n.cryptService=new A.a,n.cacheService=new V(1),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"openViewModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("opening view modal"),this.setState({viewIsOpen:!0}),t=this.props.letter.letterId,n="/api/v1/letters/".concat(t,"/recipientContents"),console.log("letterId",t),null!==(a=this.cacheService.get(t))){e.next=11;break}this.setState({loadingView:!0}),this.retrieveLetterContentsFromServer(n),e.next=22;break;case 11:return e.prev=11,e.next=14,this.cryptService.decrypt(a,this.props.user.publicAddress);case 14:i=e.sent,console.log(i.letterType),this.setState({fileData:i}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(11),console.log("error with decryption");case 22:case"end":return e.stop()}}),e,this,[[11,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"closeViewModal",value:function(){console.log("closing view modal"),this.setState({viewIsOpen:!1,fileData:void 0})}},{key:"retrieveLetterContentsFromServer",value:function(e){var t=this;console.log("retrieving from server");var n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})};this.props.letter.letterId;fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(e),n).then((function(e){return console.log("logging response"),console.log(e),e.json()})).then((function(e){var n,a=e.data;console.log(a),t.cryptService.decrypt(null===(n=a.letterRecipientContents)||void 0===n?void 0:n.letterContents,t.props.user.publicAddress).then((function(e){e&&t.setState({fileData:e,loadingView:!1})})).catch((function(e){t.setState({loadingView:!1})}))})).catch((function(e){console.log(e),t.setState({loadingView:!0})}))}},{key:"openMessageModal",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({uploadedFile:t}),this.openConfirmModal();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closeMessageModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"closeProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing profile modal"),this.setState({profileIsOpen:!1,selectedUserProfile:void 0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening profile modal"),n=this.userProfiles.get(t),console.log(n),void 0===n?(this.setState({profileIsOpen:!0}),a="/api/v1/users/".concat(t,"/profile"),this.retrieveProfileFromServer(a)):this.setState({selectedUserProfile:n,profileIsOpen:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveProfileFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:if(400!==(a=e.sent).status){e.next=9;break}console.log(a.status),e.next=16;break;case 9:return e.next=11,a.json();case 11:i=e.sent,s=i.data,console.log(a),console.log(s),s&&0!==s.length&&(this.userProfiles.set(s[0].publicAddress,s[0]),this.setState({selectedUserProfile:s[0]}));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"closeHistoryModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing history modal"),this.setState({historyIsOpen:!1,loadingHistory:!1,collapseIsOpen:this.state.viewIsOpen});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openHistoryModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening history modal"),0===this.state.history.length?(this.setState({loadingHistory:!0,historyIsOpen:!0,collapseIsOpen:!0}),t=this.props.letter.letterId,n="/api/v1/letters/".concat(t,"/history"),this.retrieveHistoryFromServer(n)):this.setState({historyIsOpen:!0,collapseIsOpen:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"retrieveHistoryFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:if(400!==(a=e.sent).status){e.next=10;break}console.log(a.status),this.setState({loadingHistory:!1}),e.next=17;break;case 10:return e.next=12,a.json();case 12:i=e.sent,s=i.data,console.log(a),console.log(s),s?this.setState({history:s,loadingHistory:!1}):(console.log("fetch for letterHistory failed"),this.setState({loadingHistory:!1}));case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),this.setState({loadingHistory:!1});case 23:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"openConfirmModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("open confirm modal"),this.setState({confirmIsOpen:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeConfirmModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("close confirm modal"),this.setState({confirmIsOpen:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,a,r,i=this,s=this.props,l=(s.user,s.letter),o=(s.numRecipients,this.state),f=(o.history,o.loadingHistory,o.loadingView),c=o.profileIsOpen,u=o.historyIsOpen,p=o.uploadIsOpen,m=o.viewIsOpen,y=(o.confirmIsOpen,o.collapseIsOpen),h=o.fileData;return d.a.createElement("div",null,d.a.createElement(C.a,{className:"full-width opacity-0"},d.a.createElement(C.a.Header,{className:"d-flex justify-content-between button-blur letter-entry",onClick:function(){return i.setState({collapseIsOpen:!y})}},d.a.createElement("div",{className:"flex-fill"},d.a.createElement("span",{className:"mr-3"},"From:"),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},d.a.createElement("div",null,"View ",null===(e=l.letterWriter)||void 0===e?void 0:e.name,"'s profile"))},d.a.createElement(E.a,{variant:"outline-light",onClick:function(e){e.stopPropagation(),i.openProfileModal(l.letterWriter.publicAddress)}},null===(t=l.letterWriter)||void 0===t?void 0:t.name))),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},"View letter for ",null===(n=l.letterRequestor)||void 0===n?void 0:n.name)},d.a.createElement(E.a,{variant:"outline-light",className:"flex-shrink-1 float-right ml-3",onClick:function(e){e.stopPropagation(),m?i.closeViewModal():i.openViewModal()}},"View")))),d.a.createElement(D.a,{in:y},d.a.createElement("div",{className:"collapse-body-select"},!p&&!u&&d.a.createElement("div",{className:"display-text d-flex text-white-50"},d.a.createElement("div",{className:"flex-fill"},"Letter Information")))),d.a.createElement(P.a,{id:"profile-modal",show:c,onHide:this.closeProfileModal.bind(this),animation:!1,className:"modal",scrollable:!1},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,null===(a=this.state.selectedUserProfile)||void 0===a?void 0:a.name)),d.a.createElement(P.a.Body,null,d.a.createElement(F,{user:this.state.selectedUserProfile,onClose:this.closeProfileModal.bind(this)}))),d.a.createElement(P.a,{id:"view-modal",show:m,onHide:this.closeViewModal.bind(this),backdrop:"static",animation:!1,className:"w-100",scrollable:!1,size:"xl"},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,"For: ",null===(r=l.letterRequestor)||void 0===r?void 0:r.name)),d.a.createElement(P.a.Body,null,d.a.createElement($,{fileData:h,loadingView:f,ref:this.viewModal,user:this.props.user,onClose:this.closeViewModal.bind(this)}))))}}]),t}(d.a.Component)),ne=(n(377),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).userProfiles=void 0,n.state={profileIsOpen:!1,collapseIsOpen:!1},n.userProfiles=new Map,n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"openMessageModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"closeMessageModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"closeProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("closing profile modal"),this.setState({profileIsOpen:!1,selectedUserProfile:void 0});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openProfileModal",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening profile modal"),n=this.userProfiles.get(t),console.log(n),void 0===n?(this.setState({profileIsOpen:!0}),a="/api/v1/users/".concat(t,"/profile"),this.retrieveProfileFromServer(a)):this.setState({selectedUserProfile:n,profileIsOpen:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveProfileFromServer",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(t),n);case 4:if(400!==(a=e.sent).status){e.next=9;break}console.log(a.status),e.next=16;break;case 9:return e.next=11,a.json();case 11:i=e.sent,s=i.data,console.log(a),console.log(s),s&&0!==s.length&&(this.userProfiles.set(s[0].publicAddress,s[0]),this.setState({selectedUserProfile:s[0]}));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.props,a=(n.user,n.requestor),r=n.selected,i=this.state,s=i.profileIsOpen,l=i.collapseIsOpen;return d.a.createElement("div",null,d.a.createElement(C.a,{className:"full-width opacity-0"},d.a.createElement(C.a.Header,{className:"d-flex justify-content-between button-blur letter-entry",onClick:function(){return t.setState({collapseIsOpen:!l})}},d.a.createElement("div",{className:"flex-fill"},d.a.createElement("span",{className:"mr-3"},"For: "),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},d.a.createElement("div",null,"View ",null===a||void 0===a?void 0:a.name,"'s profile"))},d.a.createElement(E.a,{variant:"outline-light",onClick:function(e){e.stopPropagation(),t.openProfileModal(null===a||void 0===a?void 0:a.publicAddress)}},null===a||void 0===a?void 0:a.name))),d.a.createElement(N.a,{placement:"top",overlay:d.a.createElement(j.a,{id:"main-buttons"},d.a.createElement(d.a.Fragment,null,!r&&d.a.createElement("div",null," View letters for ",null===a||void 0===a?void 0:a.name),r&&d.a.createElement("div",null," Close letters for ",null===a||void 0===a?void 0:a.name)))},d.a.createElement(E.a,{variant:"outline-light",className:"flex-shrink-1 float-right ml-3",onClick:function(e){e.stopPropagation(),t.props.onView(a)}},"Letters")))),d.a.createElement(D.a,{in:l},d.a.createElement("div",{className:"collapse-body-select"},d.a.createElement("div",{className:"display-text d-flex text-white-50"},d.a.createElement("div",{className:"flex-fill"},"User Information")))),d.a.createElement(P.a,{id:"profile-modal",show:s,onHide:this.closeProfileModal.bind(this),animation:!1,className:"modal",scrollable:!1},d.a.createElement(P.a.Header,{closeButton:!0},d.a.createElement(P.a.Title,null,null===(e=this.state.selectedUserProfile)||void 0===e?void 0:e.name)),d.a.createElement(P.a.Body,null,d.a.createElement(F,{user:this.state.selectedUserProfile,onClose:this.closeProfileModal.bind(this)}))))}}]),t}(d.a.Component)),ae=(n(378),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).cacheService=void 0,n.state={requestors:[],letters:[],numRecipients:[],loadingRequestors:!0,loadingLetters:!1,dualMode:!1},n.cacheService=new V(1),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.loadRequestorList()}},{key:"loadRequestorList",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/v1/letters/receivedRequestors",t={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat("/api/v1/letters/receivedRequestors"),t).then((function(e){e.json().then((function(t){var a=t.data;console.log(a),console.log(e),0!==a.length?n.setState({requestors:a,loadingRequestors:!1}):n.setState({loadingRequestors:!1})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleLetterModal",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this.state.selectedUser)&&n.publicAddress===t.publicAddress?this.setState({selectedUser:void 0,dualMode:!1}):(this.setState({selectedUser:t,dualMode:!0,loadingLetters:!0}),this.loadLettersList(t.publicAddress));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadLettersList",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/letters/received/".concat(t),e.next=3,this.cacheService.get(t);case 3:(a=e.sent)?this.setState({letters:a,loadingLetters:!1,dualMode:!0}):(i={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({auth:{jwtToken:this.props.user.jwtToken,publicAddress:this.props.user.publicAddress},data:{}})},fetch("".concat("https://verifiable-reference-letter.herokuapp.com").concat(n),i).then((function(e){e.json().then((function(n){var a=n.data;console.log(e),a&&a.length>0?(s.cacheService.put(t,a),s.setState({letters:a,loadingLetters:!1,dualMode:!0})):s.setState({loadingLetters:!1})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.user,n=this.state,a=n.requestors,r=n.letters,i=n.numRecipients,s=n.loadingRequestors,l=n.loadingLetters,o=n.dualMode,f=n.selectedUser,c=a.map((function(n,a){return d.a.createElement(ne,{user:t,requestor:n,selected:n.publicAddress===(null===f||void 0===f?void 0:f.publicAddress),onView:e.toggleLetterModal.bind(e)})})),u=r.map((function(e,n){return d.a.createElement(te,{user:t,letter:e,numRecipients:i[n]})})),p=d.a.createElement("div",{className:"recipient-letters"},d.a.createElement("div",{className:"recipient-header mb-3"},d.a.createElement("h3",null," Users ")),d.a.createElement("div",{className:"recipient-requestorslist"},d.a.createElement("div",null,c))),m=d.a.createElement("div",{className:"recipient-letters"},d.a.createElement("div",{className:"recipient-header mb-3"},d.a.createElement("h3",null," ",null===f||void 0===f?void 0:f.name," ")),d.a.createElement("div",{className:"recipient-letterslist"},d.a.createElement("div",null,u))),y=d.a.createElement("div",{className:"recipient-footer button-blur-no-border text-white-50"},d.a.createElement("span",null," Product of Team Gas"),d.a.createElement(E.a,{variant:"outline-light",onClick:function(){e.setState({letters:[],requestors:[],loadingRequestors:!0}),e.loadRequestorList()}},d.a.createElement(_.a,{icon:O.d})));return d.a.createElement(d.a.Fragment,null,!s&&0===a.length&&d.a.createElement("div",{className:"recipient-header absolute-center"},d.a.createElement("h3",null," No Letters Received ")),!s&&!o&&0!==a.length&&d.a.createElement(w.a,{className:"recipient"},d.a.createElement(x.a,null,p),d.a.createElement(x.a,null,y)),!s&&o&&0!==a.length&&d.a.createElement(w.a,{className:"recipient-dual"},d.a.createElement(x.a,null,d.a.createElement(w.a,{className:"ml-5"},d.a.createElement(x.a,null,p)),d.a.createElement(w.a,{className:"ml-5"},!l&&d.a.createElement(x.a,null,m),l&&d.a.createElement(x.a,null,d.a.createElement("div",{className:"d-flex justify-content-center absolute-center"},d.a.createElement(I.a,{className:"",animation:"border",variant:"secondary"}))))),d.a.createElement(x.a,null,y)),s&&d.a.createElement("div",{className:"d-flex justify-content-center absolute-center"},d.a.createElement(I.a,{className:"",animation:"border",variant:"secondary"})))}}]),t}(d.a.Component)),re=(n(379),new Headers);re.set("Access-Control-Allow-Origin","*"),re.set("Content-Type","application/json");var ie=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return d.a.createElement(w.a,{className:"dashboard h-100 flex-column d-flex"},d.a.createElement(x.a,{className:"dashboard-header"},d.a.createElement("h3",null,"Dashboard")),d.a.createElement(x.a,{className:"dashboard-body d-flex h-100"},d.a.createElement(w.a,{className:"mt-5 mb-5"},d.a.createElement(b.b,{to:"/requestor",className:"text-white-50 h-100"},d.a.createElement(C.a.Header,{className:"dashboard-redirects h-100 d-flex justify-content-center align-items-center"},d.a.createElement("h1",null,"Requestor")))),d.a.createElement(w.a,{className:"mt-5 mb-5"},d.a.createElement(b.b,{to:"/writer",className:"text-white-50 h-100"},d.a.createElement(C.a.Header,{className:"dashboard-redirects h-100 d-flex justify-content-center align-items-center"},d.a.createElement("h1",null,"Writer")))),d.a.createElement(w.a,{className:"mt-5 mb-5"},d.a.createElement(b.b,{to:"/recipient",className:"text-white-50 h-100"},d.a.createElement(C.a.Header,{className:"dashboard-redirects h-100 d-flex justify-content-center align-items-center"},d.a.createElement("h1",null,"Recipient"))))))}}]),t}(d.a.Component);n(380);var se=function(e){return d.a.createElement("div",{className:"pad"},d.a.createElement("span",{className:"question"},e.question),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("span",{className:"pad meta"},d.a.createElement("text",null,e.answer)))},le=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"sectionF"},d.a.createElement("div",null,d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("span",{className:"bigTitle"},"FAQ"),d.a.createElement("br",null),d.a.createElement("br",null)),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("span",{className:"title bg-grey"},"Metamask"),d.a.createElement("div",{className:"sectionG pad bg-grey"},d.a.createElement("span",{className:"question"},"How do I set up my Metamask account?"),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("span",{className:"pad meta"},d.a.createElement("text",null,"Go to Metamask's website and follow their tutorial. You can access their website by clicking ",d.a.createElement("a",{className:"link",href:"https://metamask.io/",target:"_blank"},"here")))),d.a.createElement("span",{className:"title bg-darkgrey"},"Students"),d.a.createElement("div",{className:"sectionF bg-darkgrey"},d.a.createElement(se,{question:"How do I use the app?",answer:"First set up your metamask account. Then log into the website. From here you can request a letter from any writer that has registered with the website. Select from the drop down  menu or type in the name of the person to find the person you want to write you a letter. After you have selected the writer, confirm your choice, and they will receive a request from you. You will receive a notification when they have responded to your request. When you have received a letter, you will be able to select the party that you would like to send the letter to."})),d.a.createElement("span",{className:"title bg-lightgrey"},"Professors"),d.a.createElement("div",{className:"bg-lightgrey"},d.a.createElement(se,{question:"How do I use the app?",answer:"First set up your metamask account. Then log into the website. From here you will be able to see requests for letters that students have sent to you. To accept a request, simply click on the request and upload a letter that you have written."}),d.a.createElement(se,{question:"Why should I use this service?",answer:"The current process of receiving recommendation letter requests and sending those letters is very convoluted, especially regarding aspects of proving your identity to the parties that receive your letter. We offer a streamlined service that makes the process much easier without compromising security."})),d.a.createElement("span",{className:"title bg-grey"},"Admissions Office"),d.a.createElement("div",{className:"bg-grey"},d.a.createElement(se,{question:"How do I use the app?",answer:"First set up your metamask account. Then log into the website. From here you will be able to  see letters that have been sent to you. You can click on the received letters to view them."}),d.a.createElement(se,{question:"How can I trust the validity of letter that I receive?",answer:"Our service utilizes a public key encryption method that assures that the letter you receive  is actually from the writer and meant for the person who required the letter. This means you can be confident that the letter is real and contains the original contents."})))}}]),t}(d.a.Component),oe=(n(381),n(245)),fe=n.n(oe);n(557);var ce=function(e){return d.a.createElement("div",{className:e.className},d.a.createElement("div",{className:"small-div"},d.a.createElement("img",{src:e.image,alt:""})),d.a.createElement("div",{className:"big-div"},d.a.createElement("span",{className:"div-title"},e.title),d.a.createElement("br",null),d.a.createElement("span",null,d.a.createElement("text",{className:"div-text"},e.description))))};var ue,pe,de,me=function(e){return d.a.createElement("div",{className:e.className},d.a.createElement("i",{className:e.className}),d.a.createElement("div",{className:"big-div"},d.a.createElement("div",{className:"div-title-2 mb-5"},e.title),d.a.createElement("div",null,d.a.createElement("video",{width:"100%",height:"100%",controls:!0},d.a.createElement("source",{src:e.video,type:"video/mp4"}),"Your browser does not support the video tag."))))},ye=n(241),he=(n(558),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).cryptService=void 0,n.state={signingUp:!1,failedKey:!1,invalidEmail:!1,invalidName:!1,signUpSuccess:!1,alreadySignedUp:!1,noAccount:!1,failedSigning:!1,loggingIn:!1,notVerified:!1,failedLogin:!1,inputEmail:"",inputName:"",loginMode:!0},n.cryptService=new A.a,n.handleInputNameChange=n.handleInputNameChange.bind(Object(f.a)(n)),n.handleInputEmailChange=n.handleInputEmailChange.bind(Object(f.a)(n)),n.onLoginClick=n.onLoginClick.bind(Object(f.a)(n)),n.signMessage=n.signMessage.bind(Object(f.a)(n)),n.authenticate=n.authenticate.bind(Object(f.a)(n)),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"onSignupClick",value:function(){var e=this.props.user.publicAddress;if(""!==e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return console.log(t.test(this.state.inputEmail.toLowerCase())),console.log(this.state.inputEmail),this.state.inputEmail.length<=1||!t.test(this.state.inputEmail.toLowerCase())?(console.log(this.state.inputName),console.log("Enter your email."),void this.setState({signingUp:!1,failedKey:!1,invalidEmail:!0,invalidName:!1,signUpSuccess:!1,alreadySignedUp:!1,noAccount:!1,failedSigning:!1,loggingIn:!1,notVerified:!1,failedLogin:!1})):this.state.inputName.length<=1?(console.log(this.state.inputName),console.log("Enter your name."),void this.setState({signingUp:!1,failedKey:!1,invalidEmail:!1,invalidName:!0,signUpSuccess:!1,alreadySignedUp:!1,noAccount:!1,failedSigning:!1,loggingIn:!1,notVerified:!1,failedLogin:!1})):void this.signup({publicAddress:e,email:this.state.inputEmail,inputName:this.state.inputName}).catch((function(e){console.log(e)}))}console.log("Invalid public address. Connect to Metamask.")}},{key:"onLoginClick",value:function(){var e=this;console.log("login clicked.");var t=this.props.user.publicAddress;if(""!==t){console.log("public address:",t);fetch("".concat("https://verifiable-reference-letter.herokuapp.com","/auth/users/").concat(t),{method:"GET",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then((function(e){return console.log("logging nonce fetch response"),console.log(e),e.json()})).then((function(t){return console.log(t),null==t[0]?(console.log("need to signup."),e.setState({signingUp:!1,failedKey:!1,invalidEmail:!1,invalidName:!1,signUpSuccess:!1,alreadySignedUp:!1,noAccount:!0,failedSigning:!1,loggingIn:!1,notVerified:!1,failedLogin:!1}),Promise.reject("no existing account")):t[0]})).then(this.signMessage).then(this.authenticate).catch((function(e){console.log(e)}))}else console.log("Invalid public address. Connect to Metamask.")}},{key:"signup",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s,l=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.publicAddress,a=t.email,i=t.inputName,console.log("publicAddress:",n,"email",a,"name:",i),this.setState({signingUp:!0,failedKey:!1,invalidEmail:!1,invalidName:!1,signUpSuccess:!1,alreadySignedUp:!1,noAccount:!1,failedSigning:!1,loggingIn:!1,notVerified:!1,failedLogin:!1}),e.next=5,this.cryptService.getPublicKey(n);case 5:if(s=e.sent,console.log(s),s){e.next=10;break}return this.setState({signingUp:!1,failedKey:!0,invalidEmail:!1,invalidName:!1,signUpSuccess:!1,alreadySignedUp:!1,noAccount:!1,failedSigning:!1,loggingIn:!1,notVerified:!1,failedLogin:!1}),e.abrupt("return",Promise.reject("failed to get public key"));case 10:return this.setState({signingUp:!1}),e.next=13,fetch("".concat("https://verifiable-reference-letter.herokuapp.com","/auth/users/create"),{body:JSON.stringify({publicAddress:n,name:i,email:a,publicKey:s}),headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"POST"}).then((function(e){if(console.log("logging signup response"),console.log(e),500===e.status)throw console.log("something went wrong with signup",e.status),new Error("something went wrong with sendgrid (likely) in signup");return e.json()})).then((function(e){if(console.log(e),console.log("signup finish"),e&&0!==e.length)return l.setState({signingUp:!1,failedKey:!1,invalidEmail:!1,invalidName:!1,signUpSuccess:!0,alreadySignedUp:!1,noAccount:!1,failedSigning:!1,loggingIn:!1,notVerified:!1,failedLogin:!1}),e[0];l.setState({signingUp:!1,failedKey:!1,invalidEmail:!1,invalidName:!1,signUpSuccess:!1,alreadySignedUp:!0,noAccount:!1,failedSigning:!1,loggingIn:!1,notVerified:!1,failedLogin:!1})})).catch((function(e){return console.log(e)}));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i,s=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.publicAddress,a=t.nonce,console.log("signing the nonce"),console.log(a),i=a,console.log(i),console.log(ue.utils.utf8ToHex("".concat(i))),console.log(n),e.abrupt("return",new Promise((function(e,t){ue.eth.personal.sign(i,n,"",(function(a,r){return a?(console.log("error when signing"),s.setState({signingUp:!1,failedKey:!1,invalidEmail:!1,invalidName:!1,signUpSuccess:!1,alreadySignedUp:!1,noAccount:!1,failedSigning:!0,loggingIn:!1,notVerified:!1,failedLogin:!1}),t(a)):(console.log("message signed"),e({publicAddress:n,signature:r}))})).then(console.log).catch((function(e){console.log()}))})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"authenticate",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,i=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.publicAddress,a=t.signature,console.log("authenticating"),this.setState({signingUp:!1,failedKey:!1,invalidEmail:!1,invalidName:!1,signUpSuccess:!1,alreadySignedUp:!1,noAccount:!1,failedSigning:!1,loggingIn:!0,notVerified:!1,failedLogin:!1}),e.abrupt("return",fetch("".concat("https://verifiable-reference-letter.herokuapp.com","/auth"),{body:JSON.stringify({publicAddress:n,signature:a}),headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"POST"}).then((function(e){console.log("received response"),console.log(e),400===e.status?i.setState({signingUp:!1,failedKey:!1,invalidEmail:!1,invalidName:!1,signUpSuccess:!1,alreadySignedUp:!1,noAccount:!1,failedSigning:!1,loggingIn:!1,notVerified:!1,failedLogin:!0}):401===e.status?i.setState({signingUp:!1,failedKey:!1,invalidEmail:!1,invalidName:!1,signUpSuccess:!1,alreadySignedUp:!1,noAccount:!1,failedSigning:!1,loggingIn:!1,notVerified:!0,failedLogin:!1}):e.json().then((function(e){console.log(e);var t=e.data.jwtToken;console.log("jwtToken",t);var n=t||void 0;n?(console.log(n),i.props.callback({publicAddress:i.props.user.publicAddress,name:i.props.user.name,jwtToken:n})):console.log("error with jwtToken")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resendEmailVerification",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("resendEmailVerification"),e.next=3,fetch("".concat("https://verifiable-reference-letter.herokuapp.com","/auth/resendEmailVerification"),{body:JSON.stringify({publicAddress:this.props.user.publicAddress}),headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"POST"});case 3:500===e.sent.status?(console.log("resend failed"),alert("Email verification resend failed!")):(console.log("resend success"),alert("Email verification resend success!"));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleInputNameChange",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.target.value),this.setState({inputName:t.target.value});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleInputEmailChange",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.target.value),this.setState({inputEmail:t.target.value});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleMode",value:function(){this.setState({loginMode:!this.state.loginMode,signingUp:!1,failedKey:!1,invalidEmail:!1,invalidName:!1,signUpSuccess:!1,alreadySignedUp:!1,noAccount:!1,failedSigning:!1,loggingIn:!1,notVerified:!1,failedLogin:!1})}},{key:"render",value:function(){var e=this,t=d.a.createElement("div",{className:"d-flex justify-content-between"},d.a.createElement(E.a,{className:"mr-4 flex-shrink-1",onClick:function(){e.toggleMode()}},"Sign Up"),d.a.createElement(E.a,{className:"flex-fill",onClick:function(){e.onLoginClick()}},"Login")),n=d.a.createElement("form",{className:"justify-content-between"},d.a.createElement(Y.a,{className:"label-top border-radius"},d.a.createElement(R.a.Group,{controlId:"formEmail"},d.a.createElement(R.a.Control,{type:"email",className:"w-100 mb-3",placeholder:"Email",onChange:this.handleInputEmailChange})),d.a.createElement(ye.a,{type:"text",className:"w-100",placeholder:"Name",value:this.state.inputName,onChange:this.handleInputNameChange})),d.a.createElement("div",{className:"d-flex"},d.a.createElement(E.a,{className:"float-right flex-fill",onClick:function(){e.onSignupClick()}},"Sign Up"),d.a.createElement(E.a,{className:"float-right flex-fill ml-3",onClick:function(){e.toggleMode(),e.setState({inputName:""})}},"Back"))),a=this.props.user,r=this.state,i=r.signingUp,s=r.failedKey,l=r.invalidEmail,o=r.invalidName,f=r.signUpSuccess,c=r.alreadySignedUp,u=r.noAccount,p=r.failedSigning,m=r.loggingIn,y=r.notVerified,h=r.loginMode,b=r.failedLogin;return d.a.createElement("div",{className:"login"},d.a.createElement("div",{className:"login-form"},d.a.createElement("div",null,h?t:n),d.a.createElement("div",{className:"mt-3 d-flex justify-content-between"},(i||s||l||o||f||c||u||p||m||y||""===a.publicAddress||b)&&d.a.createElement(N.a,{placement:"bottom",overlay:d.a.createElement(j.a,{id:"learn-more"},d.a.createElement(d.a.Fragment,null,i&&d.a.createElement("div",null,"We ask you to provide your ",d.a.createElement("b",null,"Public Key")," so that you can ",d.a.createElement("b",null,"1.")," keep your letters ",d.a.createElement("b",null,"secure")," with end-to-end encryption ",d.a.createElement("b",null,"2.")," allow other users to send you letters."),s&&d.a.createElement("div",null,"Please click ",d.a.createElement("em",null,"Provide")," on Metamask to sign up. We need your ",d.a.createElement("b",null,"Public Key")," to 1. keep your letters secure 2. Allow other users to send letters to you. Learn more about ",d.a.createElement("b",null,"End-to-End Encryption")," in the FAQs."),l&&d.a.createElement("div",null,"Please enter a valid email. You will need to verify your email to complete the sign up process. Ex:"," ",d.a.createElement("b",null,"placeholder@lehigh.edu")),o&&d.a.createElement("div",null,"Please enter a valid name. This name will be"," ",d.a.createElement("b",null,"publicly visible")," to other users."),""===a.publicAddress&&d.a.createElement("div",null,"Please connect to metamask. You may need to check the Metamask extension. For Metamask troubleshooting, check out the FAQs."),f&&d.a.createElement("div",null,"You've successfully signed up. Please check your"," ",d.a.createElement("b",null,"Email")," to verify your identity!"," "),c&&d.a.createElement("div",null,"You already have an account. Please click ",d.a.createElement("b",null,"Login")," ","to authenticate. For troubleshooting, check out the FAQs."),u&&d.a.createElement("div",null,"No account found. Please click ",d.a.createElement("b",null,"Sign Up")," to create an account. For troubleshooting, check out the FAQs."),p&&d.a.createElement("div",null,"Failed to verify your identity. Please click"," ",d.a.createElement("em",null,"Sign")," on Metamask to ",d.a.createElement("b",null,"Login"),". We need your signature to verify your identity. Learn more about ",d.a.createElement("b",null,"Signing / Verification")," in the FAQs."),m&&d.a.createElement("div",null,"Please click ",d.a.createElement("em",null,"Sign")," on Metamask to ",d.a.createElement("b",null,"Login"),". We need your signature to verify your identity. Learn more about ",d.a.createElement("b",null,"Signing / Verification")," in the FAQs."),y&&d.a.createElement("div",null,"Your email is NOT verified. Please check your email to verify your identity. Or you can click ",d.a.createElement("b",null,"Re-send")," ","to send another verification email. Learn more in the FAQS."),b&&d.a.createElement("div",null,"Something went wrong with ",d.a.createElement("em",null,"Login"),". Please try again or contact us in the FAQs.")))},d.a.createElement(_.a,{icon:i||f||m?O.c:O.b,size:"lg",className:"mr-3"})),i&&d.a.createElement("div",{className:"mt-1"},"See Metamask to signup"),s&&d.a.createElement("div",{className:"mt-1"},"Error in signup process"),l&&d.a.createElement("div",{className:"mt-1"},"Please enter a valid email"),o&&d.a.createElement("div",{className:"mt-1"},"Please enter a valid name"),""===a.publicAddress&&d.a.createElement("div",{className:"mt-1"},"Please connect to ",d.a.createElement("a",{href:"https://metamask.io/download.html",target:"_blank"},"Metamask")),f&&d.a.createElement("div",{className:"mt-1"},"Success. Please verify your email"),c&&d.a.createElement("div",{className:"mt-1"},"Please login instead"),u&&d.a.createElement("div",{className:"mt-1"},"Please signup instead"),p&&d.a.createElement("div",{className:"mt-1"},"Failed to login"),m&&d.a.createElement("div",{className:"mt-1"},"Logging you in . . ."),y&&d.a.createElement("div",{className:"mt-1"},"Email not verified (",d.a.createElement("a",{className:"text-info text-white-50",onClick:this.resendEmailVerification.bind(this)},"Re-send"),")"),b&&d.a.createElement("div",{className:"mt-1"},"Failed to login"),d.a.createElement("div",{className:"flex-fill"}))))}}]),t}(d.a.Component)),be=n(151),ge=n.n(be),ve=n(559),Ee=n(560),Te=n(561),Se=n(562),ke=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={signUpLoginIsOpen:!1},n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"openSignUpLoginModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({signUpLoginIsOpen:!0});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"closeSignUpLoginModal",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({signUpLoginIsOpen:!1});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.signUpLoginIsOpen,t=d.a.createElement("div",{className:"header"},d.a.createElement("div",null,d.a.createElement("span",{className:"header-title"},"Team Gas"),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("span",{className:"header-text"},"Verifiable Reference Letters... on the blockchain!")),d.a.createElement("div",{className:"button-blur mt-5"},d.a.createElement(E.a,{variant:"outline-light",onClick:this.openSignUpLoginModal.bind(this)},"Sign Up / Login")));return d.a.createElement("div",{id:"body"},d.a.createElement(P.a,{id:"signup-login-modal",show:e,onHide:this.closeSignUpLoginModal.bind(this),animation:!1,className:"w-100",scrollable:!1,size:"sm"},d.a.createElement(P.a.Header,null,d.a.createElement(P.a.Title,null)),d.a.createElement(P.a.Body,null,d.a.createElement("div",{className:"login-holder"},d.a.createElement(he,{user:this.props.user,callback:this.props.callback})))),t,d.a.createElement(ce,{className:"section bg-darkgrey",image:ge.a,title:"About the Company",description:"Team Gas and the verifiable reference letter service aim to streamline and digitize the process of sending reference letters. Currently the process can be a major hassle, especially if professors have many requests from their students. They must send a physical letter in order to verify their identity to the third party that ultimately receives the letter. Additionally, these third parties require a physical letter often because there is no better way to verify the identity of the letter writer. The verifiable reference letter service utilizes blockchain technology and public key encryption to securely send reference letters from one user to another."}),d.a.createElement(ce,{className:"section bg-grey",image:ge.a,title:"How it Works",description:"You can start using our service by creating a Metamask account and then creating an account with us. If you are a student, you can request a letter from any writer that has registered with the website. Select from the drop down menu or type in the name of the person to find the person you want to write you a letter. After you have selected the writer, confirm your choice, and they will receive a request from you. You will receive a notification when they have responded to your request. When you have received a letter, you will be able to select the party that you would like to send the letter to. If you are a teacher, ou will be able to see requests for letters that students have sent to you. To accept a request, simply click on the request and upload a letter that you have written. Lastly, if you are a third party that receives the letter (ie a grad school or hr department of a company),  you will be able to see letters that have been sent to you. You can click on the received letters to view them."}),d.a.createElement(me,{className:"section",video:ve,title:"Login Tutorial"}),d.a.createElement(me,{className:"section",video:Ee,title:"Requestor Tutorial"}),d.a.createElement(me,{className:"section",video:Te,title:"Writer Tutorial"}),d.a.createElement(me,{className:"section",video:Se,title:"Recipient Tutorial"}))}}]),t}(d.a.Component);n.d(t,"b",(function(){return ue})),function(e){e.dashboard="/dashboard",e.requestor="/requestor",e.writer="/writer",e.recipient="/recipient"}(pe||(pe={})),function(e){e.home="/",e.login="/login",e.faq="/faq"}(de||(de={}));var we,xe,Ie=function(e){var t=e.Component,n=e.path,a=e.exact,r=void 0!==a&&a,i=e.authed;return d.a.createElement(m.b,{exact:r,path:n,render:function(e){return i?d.a.createElement(t,e):d.a.createElement(m.a,{to:{pathname:de.login}})}})};var _e=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={windowEthereum:!0,numErcBeingTraded:0,contract:{},checkedLocal:!1,connectedTo:!1,loggedIn:!1,user:{publicAddress:"",name:"",jwtToken:""}},n.onConnect=n.onConnect.bind(Object(f.a)(n)),n.onLogin=n.onLogin.bind(Object(f.a)(n)),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.onConnect()}},{key:"handleErcInputChange",value:function(e){this.setState({numErcBeingTraded:e.target.value}),console.log("Num of ERC wanted to trade: "+this.state.numErcBeingTraded);this.state.contract.methods.rate().call(),new h.a(this.state.numErcBeingTraded)}},{key:"onConnect",value:function(){var e=Object(u.a)(r.a.mark((function e(){var t,n,a,i,s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onConnect"),t=window.ethereum,console.log(t),!t){e.next=33;break}return e.next=6,t.enable();case 6:return xe=window.web3.currentProvider,ue=new fe.a(xe),e.next=10,t.request({method:"eth_accounts"});case 10:if(we=e.sent,console.log(we),n=window.localStorage.getItem("dappUser"),a={publicAddress:we[0],name:"",jwtToken:""},null==n){e.next=28;break}if(i=JSON.parse(n),console.log(i),a.publicAddress!==i.publicAddress){e.next=25;break}return e.next=20,this.checkJWT(i);case 20:s=e.sent,console.log(s),s?(a={publicAddress:i.publicAddress,name:i.name,jwtToken:i.jwtToken},this.setState({contract:void 0,user:a,loggedIn:!0,checkedLocal:!0,connectedTo:!0})):this.setState({contract:void 0,user:a,loggedIn:!1,checkedLocal:!0,connectedTo:!0}),e.next=26;break;case 25:this.setState({contract:void 0,connectedTo:!0,user:a,checkedLocal:!0});case 26:e.next=30;break;case 28:console.log(""),this.setState({contract:void 0,connectedTo:!0,user:a,checkedLocal:!0});case 30:console.log(a.publicAddress,a.name,a.jwtToken),e.next=35;break;case 33:this.state.checkedLocal&&(alert("Please download the Metamask browser extension (supported on Chrome & Firefox)"),"https://metamask.io/download.html",(l=window.open("https://metamask.io/download.html","_blank"))&&l.focus()),this.setState({windowEthereum:!1,checkedLocal:!0});case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkJWT",value:function(){var e=Object(u.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("checkJWT"),e.prev=1,e.next=4,fetch("".concat("https://verifiable-reference-letter.herokuapp.com","/api/v1/users/").concat(t.publicAddress),{body:JSON.stringify({auth:{jwtToken:t.jwtToken,publicAddress:t.publicAddress},data:[]}),headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"POST"});case 4:if(n=e.sent,console.log(n.status),401!==n.status){e.next=10;break}return e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onLogin",value:function(e){console.log("login complete"),this.setState({user:e,loggedIn:!0}),this.props.history.push("/dashboard"),window.localStorage.setItem("dappUser",JSON.stringify(e))}},{key:"render",value:function(){var e=this.state,t=(e.windowEthereum,e.checkedLocal),n=e.connectedTo,a=e.loggedIn,r=e.user,i=d.a.createElement(k,{user:r}),s=d.a.createElement(ke,{callback:this.onLogin.bind(this),user:r}),l=d.a.createElement(ie,{user:r}),o=d.a.createElement(ee,{user:r}),f=d.a.createElement(J,{user:r}),c=d.a.createElement(ae,{user:r}),u=d.a.createElement(le,null);return d.a.createElement("div",null,d.a.createElement(T,{user:r,connectedTo:n,onConnect:this.onConnect,loggedIn:a}),t&&d.a.createElement("div",{className:"application-body"},d.a.createElement(m.d,null,d.a.createElement(m.b,{path:de.login,authed:a,component:function(){return s}}),d.a.createElement(m.b,{exact:!0,path:de.home,authed:a,component:function(){return i}}),d.a.createElement(Ie,{path:pe.requestor,authed:a,Component:function(){return o}}),d.a.createElement(Ie,{path:pe.writer,authed:a,Component:function(){return f}}),d.a.createElement(Ie,{path:pe.recipient,authed:a,Component:function(){return c}}),d.a.createElement(Ie,{path:pe.dashboard,authed:a,Component:function(){return l}}),d.a.createElement(m.b,{path:de.faq,authed:a,component:function(){return u}}))))}}]),t}(d.a.Component);t.a=Object(m.g)(_e)}},[[246,1,2]]]);
//# sourceMappingURL=main.328286c2.chunk.js.map